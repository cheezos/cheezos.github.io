<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elden Ring Quest Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .completed { text-decoration: line-through; color: #6b7280; }
        .region-section { display: block; }
        .quest-list { display: block; } 
        .quest-item { display: flex; } 
        .useful-item-entry { display: flex; /* Initially shown, JS will hide if needed */ }
        .search-highlight { background-color: #fef08a; }
        .filter-button-container {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem; 
            margin-bottom: 1.5rem; 
        }
        .filter-button {
            padding: 0.5rem 1rem; 
            color: white;
            border-radius: 0.375rem; 
            transition: background-color 0.2s;
        }
        .filter-button.active {
            background-color: #2563eb; 
        }
        .filter-button:not(.active) {
            background-color: #3b82f6; 
        }
        .filter-button:hover:not(.active) {
            background-color: #1d4ed8; 
        }
        .fextralife-link {
            color: #2563eb; /* Blue-600 for links */
            text-decoration: underline;
        }
        .fextralife-link:hover {
            color: #1d4ed8; /* Darker blue on hover */
        }
        .useful-item-label { /* For styling the [Useful Item - ...] prefix */
            font-style: italic;
            color: #4b5563; /* gray-600 */
            margin-right: 0.25rem;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans">
    <div class="container mx-auto p-4 max-w-4xl">
        <h1 class="text-3xl font-bold text-center mb-6 text-gray-800">Elden Ring Quest Guide</h1>
        
        <div class="mb-6">
            <input type="text" id="searchInput" placeholder="Search quests & items..." class="w-full p-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 mb-4">
            <div class="mb-4">
                <input type="checkbox" id="showUsefulItemsToggle" class="mr-2">
                <label for="showUsefulItemsToggle" class="text-gray-700">Show Useful Item Locations (Flask Upgrades, etc.)</label>
            </div>
            <div id="filterButtonContainer" class="filter-button-container">
            </div>
        </div>

        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h2 class="text-2xl font-semibold mb-4 text-gray-700">Main Game Side Quests</h2>
            <p class="text-gray-600 mb-4">All questlines in the base game are separate from the DLC and do not require *Shadow of the Erdtree* progress to start or complete. Useful items are integrated into the quest flow.</p>
            <div class="space-y-4">
                <div class="region-section" data-region-layout="Limgrave">
                    <h3 class="text-xl font-semibold text-gray-700 cursor-pointer" onclick="toggleSectionVisibility(this)">Limgrave</h3>
                    <div class="quest-list pl-4">
                        <div class="quest-item" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span>Finish tutorial section and reach Limgrave (Church of Anticipation/Limgrave)</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>As a starting Keepsake (Optional)</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>Defeat Ulcerated Tree Spirit in Fringefolk Hero's Grave (requires 2 Stonesword Keys)</span></div>
                        <div class="quest-item" data-questline="Varre"><input type="checkbox" class="mr-2"><span>Meet Varre (Limgrave, The First Step)</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>On the path from Stormgate to Stormhill Shack (Stormhill)</span></div>
                        <div class="quest-item" data-questline="Roderika Hewg"><input type="checkbox" class="mr-2"><span>Meet Roderika at Stormhill Shack (Limgrave)</span></div>
                        <div class="quest-item" data-questline="Yura"><input type="checkbox" class="mr-2"><span>Approach Murkwater Cave and help Yura defeat Nerijus (If Yura dies, his quest fails)</span></div>
                        <div class="quest-item" data-questline="Patches Yura"><input type="checkbox" class="mr-2"><span>Find and fight Patches in Murkwater Cave (Limgrave)</span></div>
                        <div class="quest-item" data-questline="Yura"><input type="checkbox" class="mr-2"><span>Talk to Yura north of Murkwater Cave (Limgrave)</span></div>
                        <div class="quest-item" data-questline="Ranni Blaidd"><input type="checkbox" class="mr-2"><span>Return to Church of Elleh meet Ranni at night</span></div>
                        <div class="quest-item" data-questline="Boc"><input type="checkbox" class="mr-2"><span>Free Boc from tree (Limgrave, near Agheel Lake North)</span></div>
                        <div class="quest-item" data-questline="Boc"><input type="checkbox" class="mr-2"><span>Talk to Boc at Coastal Cave (Limgrave)</span></div>
                        <div class="quest-item" data-questline="Boc"><input type="checkbox" class="mr-2"><span>Defeat Coastal Cave boss and give Boc Sewing Tools (go all the way through for Church of Dragon Communion)</span></div>
                        <div class="quest-item" data-questline="Sellen Seluvis"><input type="checkbox" class="mr-2"><span>Meet Sellen in Waypoint Ruins (Limgrave)</span></div>
                        <div class="quest-item" data-questline="Alexander Jarburg"><input type="checkbox" class="mr-2"><span>Meet Alexander next to Saintsbridge (Limgrave)</span></div>
                        <div class="quest-item" data-questline="D Gurranq Fia"><input type="checkbox" class="mr-2"><span>Meet D in stormhill past Saintsbridge (Limgrave)</span></div>
                        <div class="quest-item" data-questline="D Gurranq"><input type="checkbox" class="mr-2"><span>Kill Tibia Mariner in Summonwater Village Ruins (Limgrave)</span></div>
                        <div class="quest-item" data-questline="D Gurranq Fia"><input type="checkbox" class="mr-2"><span>Return to D</span></div>
                        <div class="quest-item" data-questline="Kenneth Nepheli Gostoc"><input type="checkbox" class="mr-2"><span>Meet Kenneth Haight (Limgrave, north of Mistwood)</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="Kenneth"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>Obtained by defeating Kenneth Haight (Mistwood, Limgrave - Optional if following his quest)</span></div>
                        <div class="quest-item" data-questline="Gurranq D"><input type="checkbox" class="mr-2"><span>Find Waypoint to Bestial Sanctum (Mistwood, behind Third Church of Marika)</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Sacred Tear]</span>Collect from Third Church of Marika (Mistwood, Limgrave)</span></div>
                        <div class="quest-item" data-questline="Gurranq D"><input type="checkbox" class="mr-2"><span>Feed Gurranq 9 Deathroot (can’t find all 9 right now just give as you find them)</span></div>
                        <div class="quest-item" data-questline="Gurranq"><input type="checkbox" class="mr-2"><span>(Rest at Bestial Sanctum Site of Grace)</span></div>
                        <div class="quest-item" data-questline="Blaidd Ranni Kale"><input type="checkbox" class="mr-2"><span>Hear wolf howling (Limgrave: Mistwood Ruins)</span></div>
                        <div class="quest-item" data-questline="Blaidd Ranni Kale"><input type="checkbox" class="mr-2"><span>Return to Kale and ask about howling (Limgrave, Church of Elleh)</span></div>
                        <div class="quest-item" data-questline="Blaidd Ranni Kale"><input type="checkbox" class="mr-2"><span>Use snap gesture next to howling (Mistwood Ruins)</span></div>
                        <div class="quest-item" data-questline="Blaidd Ranni"><input type="checkbox" class="mr-2"><span>Go to Forlorn Hound Evergaol and fight Darriwil (Limgrave)</span></div>
                        <div class="quest-item" data-questline="Blaidd Ranni"><input type="checkbox" class="mr-2"><span>Speak to Blaidd after killing Darriwil</span></div>
                        <div class="quest-item" data-questline="Kenneth Nepheli Gostoc"><input type="checkbox" class="mr-2"><span>Clear Fort Haight (Limgrave)</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="Kenneth"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>In front of the entrance to Fort Haight (Mistwood, Limgrave)</span></div>
                        <div class="quest-item" data-questline="Kenneth Nepheli Gostoc"><input type="checkbox" class="mr-2"><span>Return to Kenneth Haight and accept his accord</span></div>
                        <div class="quest-item" data-questline="Kenneth Nepheli Gostoc"><input type="checkbox" class="mr-2"><span>Speak with Kenneth Haight at Fort Haight</span></div>
                        <div class="quest-item" data-questline="Sellen Seluvis"><input type="checkbox" class="mr-2"><span>Take Seluvis’s Introduction to Sellen in Waypoint Ruins (Limgrave)</span></div>
                        <div class="quest-item" data-questline="Sellen Jerren Azur Lusat"><input type="checkbox" class="mr-2"><span>Show Sellen sorcery from Azur (Waypoint Ruins; Limgrave)</span></div>
                        <div class="quest-item" data-questline="Sellen Jerren Azur Lusat"><input type="checkbox" class="mr-2"><span>Show Sellen Lusat’s sorcery (Waypoint Ruins)</span></div>
                        <div class="quest-item" data-questline="Patches VolcanoManor"><input type="checkbox" class="mr-2"><span>Return to Patches in Murkwater Cave, fight, but do not kill (Limgrave)</span></div>
                    </div>
                </div>
                <div class="region-section" data-region-layout="Weeping Peninsula">
                    <h3 class="text-xl font-semibold text-gray-700 cursor-pointer" onclick="toggleSectionVisibility(this)">Weeping Peninsula</h3>
                    <div class="quest-list pl-4">
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>South of Castle Morne Rampart Site of Grace, on a cliffside along the way to Castle Morne</span></div>
                        <div class="quest-item" data-questline="IrinaEdgar"><input type="checkbox" class="mr-2"><span>Meet Irina (Weeping Peninsula, near Bridge of Sacrifice)</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Sacred Tear]</span>Collect from Callu Baptismal Church (Weeping Peninsula, Ailing Village)</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Sacred Tear]</span>Collect from Church of Pilgrimage (Weeping Peninsula, north of Ailing Village)</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Memory Stone]</span>Found in a chest at the top of Oridys's Rise (Weeping Peninsula, east of Castle Morne Rampart. Solve "Seek three wise beasts" puzzle)</span></div>
                        <div class="quest-item" data-questline="IrinaEdgar"><input type="checkbox" class="mr-2"><span>Deliver Irina’s Letter to Edgar in Castle Morne</span></div>
                        <div class="quest-item" data-questline="IrinaEdgar"><input type="checkbox" class="mr-2"><span>Defeat Leonine Misbegotten behind Castle Morne</span></div>
                        <div class="quest-item" data-questline="IrinaEdgar"><input type="checkbox" class="mr-2"><span>Return to Edgar</span></div>
                        <div class="quest-item" data-questline="IrinaEdgar Hyetta"><input type="checkbox" class="mr-2"><span>Return to Irina’s location and talk to Edgar</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Sacred Tear]</span>Collect from Fourth Church of Marika (Weeping Peninsula, west of nomadic merchant)</span></div>
                        <div class="quest-item" data-questline="Sellen Jerren Azur Lusat"><input type="checkbox" class="mr-2"><span>Meet Sellen at Witchbane Ruins (Weeping Peninsula)</span></div>
                        <div class="quest-item" data-questline="Jerren Sellen"><input type="checkbox" class="mr-2"><span>Reload Witchbane Ruins and talk to Jerren (Weeping Peninsula)</span></div>
                    </div>
                </div>
                <div class="region-section" data-region-layout="Stormveil Castle">
                    <h3 class="text-xl font-semibold text-gray-700 cursor-pointer" onclick="toggleSectionVisibility(this)">Stormveil Castle</h3>
                    <div class="quest-list pl-4">
                        <div class="quest-item" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span>Defeat Margit, the Fell Omen</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Talisman Pouch]</span>Obtained after defeating Margit, the Fell Omen (Stormveil Castle entrance)</span></div>
                        <div class="quest-item" data-questline="Gostoc Nepheli Kenneth"><input type="checkbox" class="mr-2"><span>Meet Gostoc (Stormveil Castle, by main gate)</span></div>
                        <div class="quest-item" data-questline="Rogier Fia D"><input type="checkbox" class="mr-2"><span>Meet Rogier (Stormveil Castle, in the chapel)</span></div>
                        <div class="quest-item" data-questline="Rogier Fia D"><input type="checkbox" class="mr-2"><span>Examine Rogier’s bloodstain (Stormveil, below the castle)</span></div>
                        <div class="quest-item" data-questline="Roderika Hewg"><input type="checkbox" class="mr-2"><span>Obtain Chrysalids’ Memento (Stormveil, pile of bodies with dogs)</span></div>
                        <div class="quest-item" data-questline="Roderika Hewg"><input type="checkbox" class="mr-2"><span>Return Chrysalids’ Memento to Roderika (Stormhill Shack or Roundtable Hold)</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="Roderika"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>Given by Roderika at Roundtable Hold after giving her the Chrysalids' Memento (or found at Stormhill Shack if she leaves before you give it)</span></div>
                        <div class="quest-item" data-questline="Nepheli Gideon Kenneth Gostoc"><input type="checkbox" class="mr-2"><span>Meet Nepheli Loux (Stormveil, room before Godrick if Gostoc opened the gate, or near Secluded Cell Site of Grace)</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>Found in Stormveil Castle, on a ledge in the courtyard with many Exiled Soldiers. Drop down from the Liftside Chamber Site of Grace area.</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>Dropped by the Ulcerated Tree Spirit at the bottom of Stormveil Castle (accessible from Liftside Chamber, go down the lift and explore outside).</span></div>
                        <div class="quest-item" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span>Defeat Godrick the Grafted</span></div>
                        <div class="quest-item" data-questline="Roderika Hewg"><input type="checkbox" class="mr-2"><span>Return to where you found Chrysalids’ Memento to find Crimson Hood (Stormveil)</span></div>
                        <div class="quest-item" data-questline="Nepheli Kenneth Gostoc"><input type="checkbox" class="mr-2"><span>Return to Godrick Grace and rest; Speak to Gostoc, Kenneth, and Nepheli at throne room</span></div>
                    </div>
                </div>
                <div class="region-section" data-region-layout="Roundtable Hold">
                    <h3 class="text-xl font-semibold text-gray-700 cursor-pointer" onclick="toggleSectionVisibility(this)">Roundtable Hold</h3>
                    <div class="quest-list pl-4">
                        <div class="quest-item" data-questline="Corhyn Goldmask"><input type="checkbox" class="mr-2"><span>Exhaust Corhyn’s dialogue (Roundtable Hold)</span></div>
                        <div class="quest-item" data-questline="Diallos Jarburg VolcanoManor"><input type="checkbox" class="mr-2"><span>Exhaust Diallos dialogue (Roundtable Hold)</span></div>
                        <div class="quest-item" data-questline="Gideon Nepheli"><input type="checkbox" class="mr-2"><span>Exhaust Gideon dialogue (Roundtable Hold)</span></div>
                        <div class="quest-item" data-questline="Fia Rogier D"><input type="checkbox" class="mr-2"><span>Talk to Fia while she holds you (Roundtable Hold)</span></div>
                        <div class="quest-item" data-questline="Hewg Roderika"><input type="checkbox" class="mr-2"><span>Exhaust Hewg dialogue (Roundtable Hold)</span></div>
                        <div class="quest-item" data-questline="Rogier Fia D"><input type="checkbox" class="mr-2"><span>Ask Rogier about the face (Roundtable Hold)</span></div>
                        <div class="quest-item" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span>Exhaust Enia’s dialogue (Roundtable Hold)</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Talisman Pouch]</span>Rewarded by Finger Reader Enia after acquiring two Great Runes.</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Memory Stone]</span>Can be purchased from Twin Maiden Husks at Roundtable Hold.</span></div>
                        <div class="quest-item" data-questline="Gideon Nepheli"><input type="checkbox" class="mr-2"><span>Exhaust Gideon dialogue (Roundtable Hold)</span></div> 
                        <div class="quest-item" data-questline="Nepheli Gideon Kenneth Gostoc"><input type="checkbox" class="mr-2"><span>Exhaust Nepheli dialogue (Roundtable Hold)</span></div>
                        <div class="quest-item" data-questline="Roderika Hewg"><input type="checkbox" class="mr-2"><span>Talk to Roderika and Hewg several times until he takes her as his apprentice (Roundtable Hold)</span></div>
                        <div class="quest-item" data-questline="Fia Rogier D"><input type="checkbox" class="mr-2"><span>Talk to Fia (Roundtable Hold)</span></div>
                        <div class="quest-item" data-questline="Rogier Fia D Ranni"><input type="checkbox" class="mr-2"><span>Give Black Knifeprint to Sorcerer Rogier (Roundtable Hold)</span></div>
                        <div class="quest-item" data-questline="Fia Rogier D"><input type="checkbox" class="mr-2"><span>Talk to Fia (Roundtable Hold)</span></div> 
                        <div class="quest-item" data-questline="Nepheli Gideon Kenneth Gostoc"><input type="checkbox" class="mr-2"><span>Talk to Nepheli (Roundtable Hold)</span></div>
                        <div class="quest-item" data-questline="Nepheli Gideon Kenneth Gostoc"><input type="checkbox" class="mr-2"><span>Nepheli is downstairs near the Stonesword Key rooms at Roundtable (near Hewg)</span></div>
                        <div class="quest-item" data-questline="Gideon Nepheli"><input type="checkbox" class="mr-2"><span>Talk to Gideon about Nepheli (Roundtable Hold)</span></div>
                        <div class="quest-item" data-questline="Nepheli Gideon Kenneth Gostoc"><input type="checkbox" class="mr-2"><span>Give Stormhawk King to Nepheli (Roundtable Hold)</span></div>
                        <div class="quest-item" data-questline="Nepheli Gideon Kenneth Gostoc"><input type="checkbox" class="mr-2"><span>Exhaust Nepheli dialogue (Roundtable Hold)</span></div>
                        <div class="quest-item" data-questline="Diallos Jarburg VolcanoManor"><input type="checkbox" class="mr-2"><span>Exhaust Diallos’ dialogue (Roundtable Hold)</span></div>
                        <div class="quest-item" data-questline="Corhyn Goldmask"><input type="checkbox" class="mr-2"><span>Exhaust Corhyn dialogue (Roundtable Hold)</span></div>
                        <div class="quest-item" data-questline="Rogier Fia D"><input type="checkbox" class="mr-2"><span>Exhaust Rogier dialogue (Roundtable Hold)</span></div>
                        <div class="quest-item" data-questline="Fia D Rogier"><input type="checkbox" class="mr-2"><span>Talk to Fia and obtain Weathered Dagger (Roundtable Hold)</span></div>
                        <div class="quest-item" data-questline="D Fia Rogier"><input type="checkbox" class="mr-2"><span>Give dagger to D (Roundtable Hold)</span></div>
                        <div class="quest-item" data-questline="Fia D Rogier"><input type="checkbox" class="mr-2"><span>Reload Roundtable Hold and exhaust dialogue with Fia in new room past Roderika</span></div>
                        <div class="quest-item" data-questline="DungEater Boggart"><input type="checkbox" class="mr-2"><span>Speak to Dung Eater (Roundtable Hold)</span></div>
                        <div class="quest-item" data-questline="DungEater"><input type="checkbox" class="mr-2"><span>Find message from Dung Eater (Roundtable Hold)</span></div>
                        <div class="quest-item" data-questline="DungEater Boggart"><input type="checkbox" class="mr-2"><span>Talk to Dung Eater (Roundtable Hold)</span></div>
                        <div class="quest-item" data-questline="Gideon MainProgression"><input type="checkbox" class="mr-2"><span>Tell Gideon about locations and deaths of Mohg and Malenia (Roundtable Hold)</span></div>
                        <div class="quest-item" data-questline="Roderika Hewg"><input type="checkbox" class="mr-2"><span>Exhaust dialogue between Roderika and Hewg</span></div>
                    </div>
                </div>
                <div class="region-section" data-region-layout="Liurnia">
                    <h3 class="text-xl font-semibold text-gray-700 cursor-pointer" onclick="toggleSectionVisibility(this)">Liurnia</h3>
                    <div class="quest-list pl-4">
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Sacred Tear]</span>Collect from Church of Irith (Liurnia, just after Stormveil Castle exit)</span></div>
                        <div class="quest-item" data-questline="Hyetta IrinaEdgar"><input type="checkbox" class="mr-2"><span>Meet Hyetta and give Shabriri Grape (Liurnia, Lake-Facing Cliffs Site of Grace)</span></div>
                        <div class="quest-item" data-questline="Thops"><input type="checkbox" class="mr-2"><span>Meet Thops in Church of Irith (Liurnia)</span></div>
                        <div class="quest-item" data-questline="Rya VolcanoManor"><input type="checkbox" class="mr-2"><span>Meet Rya (Liurnia, near Laskyar Ruins/Scenic Isle Site of Grace)</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>West of Academy Gate Town Site of Grace (Liurnia)</span></div>
                        <div class="quest-item" data-questline="Boggart Rya DungEater"><input type="checkbox" class="mr-2"><span>Meet Boggart, buy necklace and prawn (Liurnia, Boilprawn Shack)</span></div>
                        <div class="quest-item" data-questline="Rya VolcanoManor Boggart"><input type="checkbox" class="mr-2"><span>Return Rya’s Necklace (Liurnia)</span></div>
                        <div class="quest-item" data-questline="Nepheli Gideon Seluvis"><input type="checkbox" class="mr-2"><span>Meet Nepheli at Village of Albinaurics, exhaust dialogue, and kill Omenkiller (Liurnia)</span></div>
                        <div class="quest-item" data-questline="Albus Latenna"><input type="checkbox" class="mr-2"><span>Release Albus from pot in Village of Albinaurics and obtain Haligtree Secret Medallion (Right) (Liurnia)</span></div>
                        <div class="quest-item" data-questline="Latenna Albus"><input type="checkbox" class="mr-2"><span>Find Latenna at Slumbering Wolf’s Shack (Liurnia, after Village of Albinaurics, requires Lakeside Crystal Cave)</span></div>
                        <div class="quest-item" data-questline="Latenna Albus"><input type="checkbox" class="mr-2"><span>Return medallion and promise to take Latenna to Haligtree (make sure she becomes spirit ash) (Liurnia)</span></div>
                        <div class="quest-item" data-questline="Hyetta"><input type="checkbox" class="mr-2"><span>Find Hyetta in Purified Ruins and give Shabriri Grape (Liurnia, west side of lake)</span></div>
                        <div class="quest-item" data-questline="Varre"><input type="checkbox" class="mr-2"><span>Exhaust Varre’s dialogue at Rose Church (Liurnia, west side of lake)</span></div>
                        <div class="quest-item" data-questline="IrinaEdgar Hyetta"><input type="checkbox" class="mr-2"><span>Defeat Edgar the Revenger at Revenger’s Shack (Western Liurnia)</span></div>
                        <div class="quest-item" data-questline="Diallos Jarburg VolcanoManor"><input type="checkbox" class="mr-2"><span>Find and exhaust Diallos’ dialogue slightly NE of Academy Gate Town Site of Grace (Liurnia)</span></div>
                        <div class="quest-item" data-questline="Hyetta"><input type="checkbox" class="mr-2"><span>Find Hyetta north of Gate Town Bridge Site of Grace and give Shabriri Grape (Liurnia)</span></div>
                        <div class="quest-item" data-questline="Hyetta"><input type="checkbox" class="mr-2"><span>Tell Hyetta what the grapes are (her voice lines will vomit)</span></div>
                        <div class="quest-item" data-questline="Hyetta"><input type="checkbox" class="mr-2"><span>Rest/Explore and talk to Hyetta again until she talks about becoming a Finger Maiden</span></div>
                        <div class="quest-item" data-questline="Hyetta"><input type="checkbox" class="mr-2"><span>Exhaust Hyetta’s dialogue</span></div>
                        <div class="quest-item" data-questline="Boc Goldmask"><input type="checkbox" class="mr-2"><span>Collect Gold Sewing Needle in Church of Vows (Liurnia, east side)</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>Ravine-Veiled Village (Liurnia, far north end of the ravine leading to Altus Plateau)</span></div>
                        <div class="quest-item" data-questline="Rogier Fia Ranni D"><input type="checkbox" class="mr-2"><span>Get Black Knifeprint from Black Knife Catacombs (Liurnia, northeast)</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Memory Stone]</span>Found in a chest on the top floor of the Converted Tower (Western Liurnia. Solve "Erudition guide thee!" puzzle or use Torrent)</span></div>
                        <div class="quest-item" data-questline="Nepheli Gideon Kenneth Gostoc"><input type="checkbox" class="mr-2"><span>Find Stormhawk King in Chapel of Anticipation (Four Belfries, use Imbued Sword Key for Precipice of Anticipation waygate)</span></div>
                        <div class="quest-item" data-questline="Yura Shabriri"><input type="checkbox" class="mr-2"><span>Find red summon sign to assist Yura north of Main Academy Gate Site of Grace (Raya Lucaria)</span></div>
                        <div class="quest-item" data-questline="Yura Shabriri"><input type="checkbox" class="mr-2"><span>Speak to Yura after assisting him</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>Inside Raya Lucaria Academy, in the courtyard before the Debate Parlor Site of Grace.</span></div>
                        <div class="quest-item" data-questline="Thops Sellen"><input type="checkbox" class="mr-2"><span>Get second Academy Glintstone Key (Raya Lucaria Academy, from chandelier in Church of the Cuckoo)</span></div>
                        <div class="quest-item" data-questline="Thops Sellen"><input type="checkbox" class="mr-2"><span>Give Academy Glintstone Key to Thops</span></div>
                        <div class="quest-item" data-questline="Thops Sellen"><input type="checkbox" class="mr-2"><span>Reload area and kill Teardrop Scarab where Thops was</span></div>
                        <div class="quest-item" data-questline="Thops Sellen"><input type="checkbox" class="mr-2"><span>Find Thops just outside Schoolhouse Classroom Site of Grace (Raya Lucaria)</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Memory Stone]</span>Dropped by the Red Wolf of Radagon at Raya Lucaria Academy.</span></div>
                        <div class="quest-item" data-questline="MainProgression Boc Ranni"><input type="checkbox" class="mr-2"><span>Defeat Renalla, Queen of the Full Moon</span></div>
                        <div class="quest-item" data-questline="Boc Goldmask"><input type="checkbox" class="mr-2"><span>Give Gold Sewing Needle to Boc (REST at East Raya Lucaria Gate site of grace)</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Sacred Tear]</span>Collect from Bellum Church (Liurnia, north, on the way to Grand Lift of Dectus)</span></div>
                        <div class="quest-item" data-questline="Hyetta Varre"><input type="checkbox" class="mr-2"><span>Meet Hyetta at Bellum Church (Liurnia)</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Sacred Tear]</span>Collect from Church of Inhibition (Liurnia, northeast, requires navigating madness-inducing tower or cliffs)</span></div>
                        <div class="quest-item" data-questline="Hyetta Varre YuraShabriri"><input type="checkbox" class="mr-2"><span>Defeat Festering Fingerprint Vyke near Church of Inhibition (Liurnia)</span></div>
                        <div class="quest-item" data-questline="Hyetta Varre"><input type="checkbox" class="mr-2"><span>Give Fingerprint Grape to Hyetta in Bellum Church</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>Outside Caria Manor, upper level, near the Manor Upper Level Site of Grace.</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Memory Stone]</span>Found in a chest at the top floor of Testu's Rise (Northern Liurnia, near Sorcerer's Isle. Solve "Seek three wise beasts" puzzle)</span></div>
                        <div class="quest-item" data-questline="Iji Ranni Blaidd Seluvis"><input type="checkbox" class="mr-2"><span>Meet Iji (W Liurnia, Road to the Manor Site of Grace)</span></div>
                        <div class="quest-item" data-questline="Ranni Blaidd Iji Seluvis Rogier Fia"><input type="checkbox" class="mr-2"><span>Meet Ranni in Ranni’s Rise (Three Sisters, after Caria Manor)</span></div>
                        <div class="quest-item" data-questline="Ranni Blaidd Iji Seluvis"><input type="checkbox" class="mr-2"><span>Agree to serve Ranni</span></div>
                        <div class="quest-item" data-questline="Ranni Blaidd Iji Seluvis"><input type="checkbox" class="mr-2"><span>Speak to Blaidd, Iji, and Seluvis then return to Ranni</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="Ranni"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Memory Stone]</span>Found in a chest on the top floor of Seluvis's Rise (Three Sisters, after starting Ranni's quest)</span></div>
                        <div class="quest-item" data-questline="Seluvis Ranni Sellen Gideon Nepheli DungEater"><input type="checkbox" class="mr-2"><span>Meet and speak to Seluvis in his tower (Three Sisters)</span></div>
                        <div class="quest-item" data-questline="Seluvis Gideon Nepheli DungEater Ranni"><input type="checkbox" class="mr-2"><span>Give Seluvis’ Potion to Ofnir (nothing/Nepheli lives), Nepheli (Dolores puppet from Seluvis/Nepheli dies), OR Dung Eater (Dung Eater puppet from Seluvis/Dung Eater dies)</span></div>
                        <div class="quest-item" data-questline="Seluvis Sellen Ranni"><input type="checkbox" class="mr-2"><span>Find Seluvis’ puppets and interact with Sellen puppet (Liurnia, next to Seluvis’s Rise, hidden cellar)</span></div>
                        <div class="quest-item" data-questline="Sellen Jerren Ranni"><input type="checkbox" class="mr-2"><span>Find summon signs at Raya Lucaria Grand Library can assist Sellen (Jerren’s armor, extra spells sold by Sellen) OR assist Jerren (Ancient Dragon Smithing Stone)</span></div>
                        <div class="quest-item" data-questline="Seluvis Ranni"><input type="checkbox" class="mr-2"><span>Buy puppet from Seluvis (Three Sisters)</span></div>
                        <div class="quest-item" data-questline="Seluvis Ranni"><input type="checkbox" class="mr-2"><span>Reload and ask Seluvis for another puppet</span></div>
                        <div class="quest-item" data-questline="Seluvis Ranni"><input type="checkbox" class="mr-2"><span>Purchase any of the remaining puppets Seluvis offers you (takes Starlight Shards)</span></div>
                        <div class="quest-item" data-questline="Seluvis Ranni"><input type="checkbox" class="mr-2"><span>Reload area and ask Seluvis about his scheme (Three Sisters)</span></div>
                        <div class="quest-item" data-questline="Seluvis Ranni"><input type="checkbox" class="mr-2"><span>Give Seluvis Amber Starlight Shard to receive Magic Scorpion Charm (Giving Ranni the Amber Draught will fail you out of her quest) (Three Sisters)</span></div>
                        <div class="quest-item" data-questline="Ranni Seluvis Iji Blaidd Fia Rogier"><input type="checkbox" class="mr-2"><span>Return Fingerslayer Blade to Ranni (kills Seluvis) (Three Sisters)</span></div>
                        <div class="quest-item" data-questline="Iji Ranni Blaidd"><input type="checkbox" class="mr-2"><span>Speak to Iji (W Liurnia)</span></div>
                        <div class="quest-item" data-questline="Blaidd Ranni Iji"><input type="checkbox" class="mr-2"><span>Free Blaidd (Forlorn Hound Evergaol)</span></div>
                        <div class="quest-item" data-questline="Iji Ranni Blaidd"><input type="checkbox" class="mr-2"><span>Talk to Iji (W Liurnia)</span></div>
                        <div class="quest-item" data-questline="Ranni Fia Rogier"><input type="checkbox" class="mr-2"><span>Go to Carian Study Hall and use Carian Inverted Statue to reach Divine Tower of Liurnia (Liurnia)</span></div>
                        <div class="quest-item" data-questline="Ranni Fia Rogier"><input type="checkbox" class="mr-2"><span>Collect Cursemark of Death (Liurnia Divine Tower)</span></div>
                        <div class="quest-item" data-questline="Ranni Blaidd Iji"><input type="checkbox" class="mr-2"><span>Go through waygate in Renna’s Rise (W Liurnia)</span></div>
                        <div class="quest-item" data-questline="Ranni Blaidd Iji"><input type="checkbox" class="mr-2"><span>Collect Mini Ranni (Ainsel River Main)</span></div>
                        <div class="quest-item" data-questline="Ranni Blaidd Iji"><input type="checkbox" class="mr-2"><span>Rest at Ainsel River Main grace and speak with Ranni</span></div>
                        <div class="quest-item" data-questline="Ranni Blaidd Iji"><input type="checkbox" class="mr-2"><span>Defeat Baleful Shadow (Nokstella)</span></div>
                        <div class="quest-item" data-questline="Ranni Fia Rogier"><input type="checkbox" class="mr-2"><span>Unlock chest next to Renalla (Raya Lucaria)</span></div>
                        <div class="quest-item" data-questline="Ranni"><input type="checkbox" class="mr-2"><span>Enter coffin (Grand Cloister)</span></div>
                        <div class="quest-item" data-questline="Ranni"><input type="checkbox" class="mr-2"><span>Defeat Astel, Naturalborn of the Void</span></div>
                        <div class="quest-item" data-questline="Ranni Blaidd Iji"><input type="checkbox" class="mr-2"><span>Enter hole in floor in Cathedral of Manus Celes (Liurnia, requires defeating Astel)</span></div>
                        <div class="quest-item" data-questline="Blaidd Ranni Iji"><input type="checkbox" class="mr-2"><span>Kill Blaidd (Ranni’s Rise)</span></div>
                        <div class="quest-item" data-questline="Ranni Blaidd Iji"><input type="checkbox" class="mr-2"><span>Return to Ranni’s chamber rest and talk to Mini Ranni</span></div>
                        <div class="quest-item" data-questline="Alexander Jarburg"><input type="checkbox" class="mr-2"><span>Find Alexander South of Carian Study Hall, above Jarburg (Liurnia, get him out of a hole)</span></div>
                    </div>
                </div>
                <div class="region-section" data-region-layout="Siofra River">
                    <h3 class="text-xl font-semibold text-gray-700 cursor-pointer" onclick="toggleSectionVisibility(this)">Siofra River</h3>
                    <div class="quest-list pl-4">
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>Siofra River, on a small island south of the Worshippers' Woods Site of Grace, requires using a Spiritspring jump.</span></div>
                        <div class="quest-item" data-questline="Blaidd Ranni Seluvis Sellen"><input type="checkbox" class="mr-2"><span>Find Blaidd (Siofra River, near Hallowhorn Grounds)</span></div>
                        <div class="quest-item" data-questline="Seluvis Ranni Sellen Blaidd"><input type="checkbox" class="mr-2"><span>Speak to Seluvis (Three Sisters)</span></div>
                        <div class="quest-item" data-questline="Blaidd Ranni Seluvis Sellen"><input type="checkbox" class="mr-2"><span>Tell Blaidd about what Sellen told you (Siofra River)</span></div>
                    </div>
                </div>
                <div class="region-section" data-region-layout="Caelid">
                    <h3 class="text-xl font-semibold text-gray-700 cursor-pointer" onclick="toggleSectionVisibility(this)">Caelid</h3>
                    <div class="quest-list pl-4">
                        <div class="quest-item" data-questline="Gowry Millicent"><input type="checkbox" class="mr-2"><span>Talk to Gowry in Gowry’s Shack (Caelid, near Sellia Gateway)</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>Sellia, Town of Sorcery, under a Phantom Tree in the northern section of town after lighting the braziers.</span></div>
                        <div class="quest-item" data-questline="Gowry Millicent"><input type="checkbox" class="mr-2"><span>Defeat Commander O’Neil and get Unalloyed Gold Needle (Caelid, Swamp of Aeonia)</span></div>
                        <div class="quest-item" data-questline="Gowry Millicent"><input type="checkbox" class="mr-2"><span>Exhaust dialog until Gowry fixes the Unalloyed Gold Needle (Caelid)</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Sacred Tear]</span>Collect from Church of the Plague (Caelid, overlooking Sellia and Gowry's Shack)</span></div>
                        <div class="quest-item" data-questline="Millicent Gowry"><input type="checkbox" class="mr-2"><span>Take needle to Millicent at Church of the Plague (Caelid)</span></div>
                        <div class="quest-item" data-questline="Millicent Gowry"><input type="checkbox" class="mr-2"><span>Rest and exhaust Millicent’s dialogue (Caelid)</span></div>
                        <div class="quest-item" data-questline="Millicent Gowry"><input type="checkbox" class="mr-2"><span>Return to Gowry’s Shack and exhaust dialogue with Millicent (Caelid)</span></div>
                        <div class="quest-item" data-questline="Gowry Millicent"><input type="checkbox" class="mr-2"><span>Reload area and speak to Gowry (Caelid)</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>South Caelid, following the road to Redmane Castle, south of where it splits near the Nomadic Merchant.</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>Dragonbarrow, on the path to Bestial Sanctum from Lenne's Rise.</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Memory Stone]</span>Found in a chest at the top floor of Lenne's Rise (Eastern Dragonbarrow, Caelid. Use Spiritspring to access balcony).</span></div>
                        <div class="quest-item" data-questline="MainProgression Blaidd Alexander Jerren Ranni ErdtreeDLC"><input type="checkbox" class="mr-2"><span>Defeat Starscourge Radahn (Redmane Castle Festival)</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>Dropped by the Putrid Tree Spirit boss at the end of the War-Dead Catacombs (Caelid, accessed after defeating Radahn).</span></div>
                        <div class="quest-item" data-questline="Blaidd Ranni Alexander Jerren"><input type="checkbox" class="mr-2"><span>Talk to Blaidd after Radahn (Radahn’s arena)</span></div>
                        <div class="quest-item" data-questline="Alexander Blaidd Jerren Jarburg"><input type="checkbox" class="mr-2"><span>Talk to Alexander after Radahn (Radahn’s arena)</span></div>
                        <div class="quest-item" data-questline="Jerren Sellen Blaidd Ranni"><input type="checkbox" class="mr-2"><span>Exhaust dialogue with Witch-Hunter Jerren in Redmane Castle (Caelid)</span></div>
                        <div class="quest-item" data-questline="Sellen Jerren Azur Lusat"><input type="checkbox" class="mr-2"><span>Go through Sellia Hideaway and get sorcery from Master Lusat (Caelid, behind illusory wall in Church of the Plague graveyard)</span></div>
                        <div class="quest-item" data-questline="Gowry Millicent"><input type="checkbox" class="mr-2"><span>Kill/loot Gowry in Gowry’s Shack (Caelid)</span></div>
                    </div>
                </div>
                <div class="region-section" data-region-layout="Jarburg">
                    <h3 class="text-xl font-semibold text-gray-700 cursor-pointer" onclick="toggleSectionVisibility(this)">Jarburg</h3>
                    <div class="quest-list pl-4">
                         <div class="quest-item" data-questline="Jarburg Alexander Diallos"><input type="checkbox" class="mr-2"><span>Exhaust Jar-Bairn dialogue (Jarburg)</span></div>
                         <div class="quest-item" data-questline="Diallos Jarburg Alexander VolcanoManor"><input type="checkbox" class="mr-2"><span>Exhaust dialogue with Jar-Bairn and Diallos (Jarburg)</span></div>
                         <div class="quest-item" data-questline="Diallos Jarburg Alexander VolcanoManor"><input type="checkbox" class="mr-2"><span>Exhaust dialogue with Diallos (Jarburg)</span></div>
                         <div class="quest-item" data-questline="Jarburg Diallos Alexander"><input type="checkbox" class="mr-2"><span>Reload Jarburg speak to Jar-Bairn</span></div>
                         <div class="quest-item" data-questline="Jarburg Diallos Alexander"><input type="checkbox" class="mr-2"><span>Reload Jarburg again and speak to Jar-Bairn</span></div>
                         <div class="quest-item" data-questline="Jarburg Alexander Diallos"><input type="checkbox" class="mr-2"><span>Give Jar Bairn Alexander’s Innards (Jarburg)</span></div>
                         <div class="quest-item" data-questline="Jarburg Alexander Diallos"><input type="checkbox" class="mr-2"><span>Reload area get Companion Jar Talisman where Jar-Bairn was seated</span></div>
                    </div>
                </div>
                <div class="region-section" data-region-layout="Nokron">
                    <h3 class="text-xl font-semibold text-gray-700 cursor-pointer" onclick="toggleSectionVisibility(this)">Nokron</h3>
                    <div class="quest-list pl-4">
                        <div class="quest-item" data-questline="Ranni Fia MainProgression"><input type="checkbox" class="mr-2"><span>Drop down crater (Mistwood, after Radahn) navigate to Nokron, Eternal City</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>Nokron, Eternal City, near the Ancestral Woods Site of Grace, before the drop to the Mimic Tear boss.</span></div>
                        <div class="quest-item" data-questline="Ranni Blaidd Iji Seluvis Fia Rogier"><input type="checkbox" class="mr-2"><span>Find Fingerslayer Blade (Night’s Sacred Ground, in Nokron)</span></div>
                        <div class="quest-item" data-questline="D Fia Rogier"><input type="checkbox" class="mr-2"><span>Find D, Beholder of Death and give unaltered Twinned Set (Nokron, after Valiant Gargoyle in Siofra Aqueduct)</span></div>
                        <div class="quest-item" data-questline="Fia D Rogier MainProgression"><input type="checkbox" class="mr-2"><span>Use the coffin in the Valiant Gargoyle boss arena to travel to Deeproot Depths (Nokron)</span></div>
                    </div>
                </div>
                <div class="region-section" data-region-layout="Altus Plateau">
                    <h3 class="text-xl font-semibold text-gray-700 cursor-pointer" onclick="toggleSectionVisibility(this)">Altus Plateau</h3>
                    <div class="quest-list pl-4">
                        <div class="quest-item" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span>Reach Altus Plateau (via Grand Lift of Dectus or Ruin-Strewn Precipice)</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>Right next to the road heading north from the Altus Highway Junction Site of Grace.</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>Underneath a Phantom Tree at Erdtree-Gazing Hill Site of Grace, north of the Lux Ruins.</span></div>
                        <div class="quest-item" data-questline="Boc Goldmask"><input type="checkbox" class="mr-2"><span>Talk to Boc near Altus Highway Junction Site of Grace (you may be able to give him the needle here, if not that is okay, you will be able to see Boc later)</span></div>
                        <div class="quest-item" data-questline="Millicent Gowry"><input type="checkbox" class="mr-2"><span>Speak to Millicent north of Erdtree-Gazing Hill Site of Grace (Altus Plateau)</span></div>
                        <div class="quest-item" data-questline="Seluvis Ranni"><input type="checkbox" class="mr-2"><span>Find Amber Starlight Shard (Altus Plateau, near Altus Highway Junction, in a small cave)</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Sacred Tear]</span>Collect from Second Church of Marika (Altus Plateau, north of Altus Highway Junction)</span></div>
                        <div class="quest-item" data-questline="Yura Shabriri Eleonora"><input type="checkbox" class="mr-2"><span>Meet Yura at Second Church of Marika and help him defeat Eleonora, Violet Bloody Finger (Altus Plateau)</span></div>
                        <div class="quest-item" data-questline="Corhyn Goldmask"><input type="checkbox" class="mr-2"><span>Find Goldmask and tell Corhyn of his location (Altus Plateau, north part of forest, on broken greatbridge)</span></div>
                        <div class="quest-item" data-questline="Corhyn Goldmask"><input type="checkbox" class="mr-2"><span>Reload area and exhaust Corhyn dialogue next to Goldmask (Altus Plateau)</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>Northwest of the Minor Erdtree in Altus Plateau (near Woodfolk Ruins).</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Sacred Tear]</span>Collect from Stormcaller Church (Altus Plateau, near the Rampartside Path Site of Grace, south of the walls of Leyndell)</span></div>
                        <div class="quest-item" data-questline="Varre VolcanoManor"><input type="checkbox" class="mr-2"><span>Invade 3 times with Festering Bloody Finger OR find invasion sign [Magnus the Beast Claw] in Writheblood Ruins (W of Altus Plateau Minor Erdtree)</span></div>
                        <div class="quest-item" data-questline="Varre Hyetta"><input type="checkbox" class="mr-2"><span>Get anointed by Varre (Liurnia, Rose Church)</span></div> 
                        <div class="quest-item" data-questline="Varre Hyetta"><input type="checkbox" class="mr-2"><span>Soak Lord of Blood Favor in blood of maiden (Church of Inhibition [Liurnia], Chapel of Anticipation [Four Belfries], OR Kill Hyetta)</span></div>
                        <div class="quest-item" data-questline="Varre"><input type="checkbox" class="mr-2"><span>Give Varre Lord of Blood’s Favor (Rose Church)</span></div>
                        <div class="quest-item" data-questline="Millicent Gowry"><input type="checkbox" class="mr-2"><span>Get Valkyrie’s Prosthesis (Shaded Castle, Altus Plateau north)</span></div>
                        <div class="quest-item" data-questline="Millicent Gowry"><input type="checkbox" class="mr-2"><span>Give Valkyrie’s Prosthesis to Millicent (Altus Plateau, Erdtree-Gazing Hill)</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>Underneath a Phantom Tree southeast of Windmill Village, on the road to the capital.</span></div>
                        <div class="quest-item" data-questline="Millicent Gowry"><input type="checkbox" class="mr-2"><span>Defeat Godskin Apostle at top of Dominula, Windmill Village and exhaust Millicent’s dialogue after resting (Altus Plateau)</span></div>
                    </div>
                </div>
                <div class="region-section" data-region-layout="Mt Gelmir">
                    <h3 class="text-xl font-semibold text-gray-700 cursor-pointer" onclick="toggleSectionVisibility(this)">Mt Gelmir</h3>
                    <div class="quest-list pl-4">
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>Under a Phantom Tree as you exit the narrow channel north of Seethewater River, on the way to Mt. Gelmir.</span></div>
                        <div class="quest-item" data-questline="Alexander Jarburg VolcanoManor"><input type="checkbox" class="mr-2"><span>Find Alexander (Seethewater Terminus, Mt. Gelmir, in the lava lake)</span></div>
                        <div class="quest-item" data-questline="Sellen Jerren Azur Lusat"><input type="checkbox" class="mr-2"><span>Find Primeval Sorcerer Azur and accept sorcery (Mt Gelmir, Hermit Village)</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Memory Stone]</span>Dropped by Demi-Human Queen Maggie, an optional boss in the northeast of Hermit Village (Mt. Gelmir).</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>After the Full-Grown Fallingstar Beast boss fight on Mt. Gelmir, on the path leading towards Volcano Manor.</span></div>
                    </div>
                </div>
                <div class="region-section" data-region-layout="Volcano Manor">
                    <h3 class="text-xl font-semibold text-gray-700 cursor-pointer" onclick="toggleSectionVisibility(this)">Volcano Manor</h3>
                    <div class="quest-list pl-4">
                        <div class="quest-item" data-questline="Rya VolcanoManor Tanith Diallos"><input type="checkbox" class="mr-2"><span>Speak to Rya (at Lux Ruins if you dont have Dectus Medallion; at Lift of Dectus if you do, or near Erdtree-Gazing Hill)</span></div>
                        <div class="quest-item" data-questline="MainProgression VolcanoManor"><input type="checkbox" class="mr-2"><span>Reach Volcano Manor</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>Inside Volcano Manor legacy dungeon, after navigating through the town area, before the Temple of Eiglay.</span></div>
                        <div class="quest-item" data-questline="Tanith VolcanoManor Bernahl Patches Rya Diallos"><input type="checkbox" class="mr-2"><span>Meet Tanith and pick up letter in drawing room (Volcano Manor)</span></div>
                        <div class="quest-item" data-questline="Diallos VolcanoManor Tanith Jarburg"><input type="checkbox" class="mr-2"><span>Exhaust Diallos’ dialogue (Volcano Manor)</span></div>
                        <div class="quest-item" data-questline="VolcanoManor Tanith Bernahl Patches"><input type="checkbox" class="mr-2"><span>Assassinate Old Knight Istvan (Stormhill, Limgrave)</span></div>
                        <div class="quest-item" data-questline="Tanith VolcanoManor Bernahl Patches Rya"><input type="checkbox" class="mr-2"><span>Speak to Tanith and receive another Letter (Volcano Manor)</span></div>
                        <div class="quest-item" data-questline="Rya VolcanoManor Tanith Diallos"><input type="checkbox" class="mr-2"><span>Find Rya in new room and speak to Rya in snake form (Volcano Manor)</span></div>
                        <div class="quest-item" data-questline="VolcanoManor Tanith Bernahl Patches"><input type="checkbox" class="mr-2"><span>Assassinate Rileigh the Idle (Altus Plateau)</span></div>
                        <div class="quest-item" data-questline="Tanith VolcanoManor Bernahl Patches Rya"><input type="checkbox" class="mr-2"><span>Speak to Tanith and receive another letter (Volcano Manor)</span></div>
                        <div class="quest-item" data-questline="Rya VolcanoManor Tanith Diallos"><input type="checkbox" class="mr-2"><span>Speak to Zorayas (Volcano Manor)</span></div>
                        <div class="quest-item" data-questline="Bernahl VolcanoManor Tanith Patches"><input type="checkbox" class="mr-2"><span>Speak to Bernahl to receive Letter to Bernahl (Volcano Manor)</span></div>
                        <div class="quest-item" data-questline="Patches VolcanoManor Tanith Bernahl"><input type="checkbox" class="mr-2"><span>Speak to Patches to receive Letter to Patches (Volcano Manor)</span></div>
                        <div class="quest-item" data-questline="VolcanoManor Tanith Bernahl Patches Alexander"><input type="checkbox" class="mr-2"><span>Find and defeat Tragoth (Ruin-Strewn Precipice, requires Patches' letter) (May want to kill Draconic Tree Sentinel first)</span></div>
                        <div class="quest-item" data-questline="Rya VolcanoManor Tanith Diallos"><input type="checkbox" class="mr-2"><span>Defeat God-Skin Noble and get Serpent’s Amnion (Volcano Manor, Temple of Eiglay)</span></div>
                        <div class="quest-item" data-questline="Rya VolcanoManor Tanith Diallos"><input type="checkbox" class="mr-2"><span>Give Serpent’s Amnion to Zorayas (Volcano Manor)</span></div>
                        <div class="quest-item" data-questline="Tanith VolcanoManor Rya"><input type="checkbox" class="mr-2"><span>Rest and Speak to Tanith about Zorayas’ absence (Volcano Manor)</span></div>
                        <div class="quest-item" data-questline="Rya VolcanoManor Tanith Diallos"><input type="checkbox" class="mr-2"><span>Find and talk to Zorayas (Volcano Manor, hidden room near Temple of Eiglay)</span></div>
                        <div class="quest-item" data-questline="Rya VolcanoManor Tanith Diallos"><input type="checkbox" class="mr-2"><span>Kill Rya (transforms into snake and drops Daedicar’s Woe), leave her alive and come back after killing Rykard (Rya gone, Daedicar’s Woe, Zorayas’ Letter), or give Tonic of Forgetfulness (After Rykard is killed and manor inhabitants left, she will return to her spot, reload to find Daedicar’s Woe)</span></div>
                        <div class="quest-item" data-questline="Diallos VolcanoManor Tanith Jarburg"><input type="checkbox" class="mr-2"><span>Return to Volcano Manor and exhaust Diallos dialogue</span></div>
                        <div class="quest-item" data-questline="Tanith VolcanoManor Bernahl Patches Rya"><input type="checkbox" class="mr-2"><span>Exhaust dialogue with Tanith (Volcano Manor)</span></div>
                        <div class="quest-item" data-questline="MainProgression VolcanoManor Tanith Bernahl Patches Rya"><input type="checkbox" class="mr-2"><span>Defeat Rykard, Lord of Blasphemy</span></div>
                        <div class="quest-item" data-questline="Bernahl VolcanoManor Tanith Patches"><input type="checkbox" class="mr-2"><span>Exhaust dialogue with Bernahl (Volcano Manor)</span></div>
                        <div class="quest-item" data-questline="Patches VolcanoManor Tanith Bernahl"><input type="checkbox" class="mr-2"><span>Give Patches’ item to Tanith, kill Tanith and bodyguard (Volcano Manor, Rykard's arena)</span></div>
                        <div class="quest-item" data-questline="Patches VolcanoManor Tanith Bernahl"><input type="checkbox" class="mr-2"><span>Exhaust Patches dialogue (Shaded Castle)</span></div>
                    </div>
                </div>
                <div class="region-section" data-region-layout="Leyndell">
                    <h3 class="text-xl font-semibold text-gray-700 cursor-pointer" onclick="toggleSectionVisibility(this)">Leyndell, Royal Capital</h3>
                    <div class="quest-list pl-4">
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>TWO (2) can be found underneath the Phantom Tree inside the western gate of the Capital Outskirts (near Outer Wall Phantom Tree Site of Grace).</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>Dropped by the Lesser Ulcerated Tree Spirit in an unmarked military camp south of the Outer Wall Phantom Tree Site of Grace (Capital Outskirts).</span></div>
                        <div class="quest-item" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span>Enter Leyndell, Royal Capital</span></div>
                        <div class="quest-item" data-questline="Boc Goldmask"><input type="checkbox" class="mr-2"><span>Speak to Boc (East Capital Rampart Site of Grace)</span></div>
                        <div class="quest-item" data-questline="Boc Goldmask"><input type="checkbox" class="mr-2"><span>Use “You’re Beautiful” gesture in front of Boc (good ending) OR give Larval Tear to Boc (bad ending)</span></div>
                        <div class="quest-item" data-questline="Boc Goldmask"><input type="checkbox" class="mr-2"><span>If “You’re Beautiful” used, reload grace and speak to Boc again</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>TWO (2) can be found underneath the Phantom Tree in the northwestern section of the Capital Outskirts (near Outer Wall Battleground Site of Grace).</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>Dropped by the Lesser Ulcerated Tree Spirit directly north of the Avenue Balcony Site of Grace in Leyndell Royal Capital.</span></div>
                        <div class="quest-item" data-questline="DungEater Boggart"><input type="checkbox" class="mr-2"><span>Find Seedbed Curse (Leyndell, various locations, one is in the fortified manor replica of Roundtable Hold)</span></div>
                        <div class="quest-item" data-questline="Bernahl VolcanoManor"><input type="checkbox" class="mr-2"><span>Find invasion sign to assist Bernahl (Leyndell, near West Capital Rampart)</span></div>
                        <div class="quest-item" data-questline="Bernahl VolcanoManor Tanith Patches"><input type="checkbox" class="mr-2"><span>Report back to Bernahl (Volcano Manor)</span></div>
                        <div class="quest-item" data-questline="Corhyn Goldmask Boc"><input type="checkbox" class="mr-2"><span>Find Goldmask and Corhyn next to Leyndell Colosseum and exhaust dialogue</span></div>
                        <div class="quest-item" data-questline="DungEater Boggart"><input type="checkbox" class="mr-2"><span>Find and free Dung Eater (Subterranean Shunning Grounds, requires Sewer-Gaol Key or path from Leyndell Catacombs)</span></div>
                        <div class="quest-item" data-questline="Boggart DungEater Rya"><input type="checkbox" class="mr-2"><span>Speak to Boggart in outer moat, buy crab (outside Leyndell, near Capital Rampart Site of Grace)</span></div>
                        <div class="quest-item" data-questline="Boggart DungEater Rya"><input type="checkbox" class="mr-2"><span>Exhaust Boggart’s dialogue (Leyndell Moat)</span></div>
                        <div class="quest-item" data-questline="DungEater Boggart Rya"><input type="checkbox" class="mr-2"><span>Find Boggart’s body and defeat Dung Eater (Leyndell Moat)</span></div>
                        <div class="quest-item" data-questline="DungEater Boggart Seluvis"><input type="checkbox" class="mr-2"><span>Find and feed Dung Eater 5 Seedbed Curses (won’t find all now just before finishing game) (Subterranean Shunning Grounds)</span></div>
                        <div class="quest-item" data-questline="Corhyn Goldmask Boc"><input type="checkbox" class="mr-2"><span>Get Law of Regression Incantation (Leyndell, from Prayerbook given to Corhyn/Miriel)</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Talisman Pouch]</span>Upon defeating Godfrey, First Elden Lord (Golden Shade) in Leyndell, Royal Capital (Erdtree Sanctuary).</span></div>
                        <div class="quest-item" data-questline="Corhyn Goldmask Boc"><input type="checkbox" class="mr-2"><span>Find statue west of Erdtree Sanctuary Site of Grace until you see white message and cast Law of Regression (Leyndell)</span></div>
                        <div class="quest-item" data-questline="Corhyn Goldmask Boc"><input type="checkbox" class="mr-2"><span>Speak with Goldmask (Leyndell)</span></div>
                        <div class="quest-item" data-questline="MainProgression Hyetta"><input type="checkbox" class="mr-2"><span>Defeat Morgott, the Omen King</span></div>
                        <div class="quest-item" data-questline="Hyetta MainProgression YuraShabriri"><input type="checkbox" class="mr-2"><span>Speak to Hyetta in Frenzied Flame Proscription (MEETING THREE FINGERS WILL LOCK YOU OUT OF OTHER ENDINGS)  (Subterranean Shunning Grounds, after Morgott)</span></div>
                        <div class="quest-item" data-questline="Hyetta MainProgression YuraShabriri"><input type="checkbox" class="mr-2"><span>(If you met Three Fingers) Reload where you spoke to Hyetta and pick up Frenzied Flame Seal  (Subterranean Shunning Grounds)</span></div>
                    </div>
                </div>
                 <div class="region-section" data-region-layout="Deeproot Depths">
                    <h3 class="text-xl font-semibold text-gray-700 cursor-pointer" onclick="toggleSectionVisibility(this)">Deeproot Depths</h3>
                    <div class="quest-list pl-4">
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>Found near the Grand Cloister Site of Grace. Follow the blood river backward; a Putrid Tree Spirit will appear, kill it to get the seed. (Technically Lake of Rot access, but often done around Deeproot exploration)</span></div>
                        <div class="quest-item" data-questline="Fia D Rogier Ranni"><input type="checkbox" class="mr-2"><span>Talk to Fia and wish to be held (Deeproot Depths, Prince of Death's Throne)</span></div>
                        <div class="quest-item" data-questline="Fia D Rogier Ranni"><input type="checkbox" class="mr-2"><span>Ask for embrace from Fia and give Cursemark of Death (Deeproot Depths)</span></div>
                        <div class="quest-item" data-questline="Fia D Rogier Ranni"><input type="checkbox" class="mr-2"><span>Reload area and exhaust dialogue (Deeproot Depths)</span></div>
                        <div class="quest-item" data-questline="Fia D Rogier Ranni"><input type="checkbox" class="mr-2"><span>Defeat Lichdragon Fortissax (Deeproot Depths, enter Fia's dream)</span></div>
                        <div class="quest-item" data-questline="D Fia Rogier"><input type="checkbox" class="mr-2"><span>Reload Prince of Death Throne and talk to D (Deeproot Depths)</span></div>
                        <div class="quest-item" data-questline="D Fia Rogier"><input type="checkbox" class="mr-2"><span>Reload and pick up D’s Set (Deeproot Depths)</span></div>
                    </div>
                </div>
                <div class="region-section" data-region-layout="Mountaintops of the Giants">
                    <h3 class="text-xl font-semibold text-gray-700 cursor-pointer" onclick="toggleSectionVisibility(this)">Mountaintops of the Giants</h3>
                    <div class="quest-list pl-4">
                        <div class="quest-item" data-questline="VolcanoManor Tanith Bernahl Patches"><input type="checkbox" class="mr-2"><span>Assassinate Juno Hoslow, Knight of Blood (Mountaintops of the Giants, near Shack of the Lofty)</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>Near the Zamor Ruins Site of Grace.</span></div>
                        <div class="quest-item" data-questline="Corhyn Goldmask"><input type="checkbox" class="mr-2"><span>Find Corhyn and Goldmask at bridge south of Stargazers Ruins; exhaust dialogue (Mountaintops of the Giants)</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>Foot of the Forge Site of Grace, before the Fire Giant.</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Sacred Tear]</span>Collect from First Church of Marika (Mountaintops of the Giants, south of Freezing Lake)</span></div>
                        <div class="quest-item" data-questline="Latenna Albus MainProgression"><input type="checkbox" class="mr-2"><span>Get Haligtree Secret Medallion (Left) at Castle Sol (Mountaintops of the Giants, defeat Commander Niall)</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Sacred Tear]</span>Collect from Church of Repose (Mountaintops of the Giants, southwest of Giants' Gravepost, guarded by Okina)</span></div>
                        <div class="quest-item" data-questline="MainProgression Melina"><input type="checkbox" class="mr-2"><span>Defeat Fire Giant & speak with Melina at Forge of the Giants</span></div>
                    </div>
                </div>
                <div class="region-section" data-region-layout="Consecrated Snowfield">
                    <h3 class="text-xl font-semibold text-gray-700 cursor-pointer" onclick="toggleSectionVisibility(this)">Consecrated Snowfield</h3>
                    <div class="quest-list pl-4">
                        <div class="quest-item" data-questline="MainProgression Latenna Albus"><input type="checkbox" class="mr-2"><span>Reach Consecrated Snowfield (using Haligtree Secret Medallion at Grand Lift of Rold)</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>Consecrated Snowfield, south from the Inner Consecrated Snowfield Site of Grace, near a frozen river.</span></div>
                        <div class="quest-item" data-questline="Latenna Albus"><input type="checkbox" class="mr-2"><span>Find giant Albinauric at Apostate Derelict and summon Latenna (Consecrated Snowfield, northwest)</span></div>
                    </div>
                </div>
                <div class="region-section" data-region-layout="Mohgwyn Palace">
                    <h3 class="text-xl font-semibold text-gray-700 cursor-pointer" onclick="toggleSectionVisibility(this)">Mohgwyn Palace</h3>
                    <div class="quest-list pl-4">
                        <div class="quest-item" data-questline="Varre MainProgression ErdtreeDLC"><input type="checkbox" class="mr-2"><span>Enter Mohgwyn Palace (entering via Consecrated Snowfield TP will allow you to start with more available exploration, or via Varre's quest)</span></div>
                        <div class="quest-item" data-questline="Varre"><input type="checkbox" class="mr-2"><span>Kill 3 invaders at blood swamp (fails if Mohg is killed)</span></div>
                        <div class="quest-item" data-questline="Varre"><input type="checkbox" class="mr-2"><span>Find invasion sign [Varre] near Mausoleum Dynasty Midpoint Site of Grace</span></div>
                        <div class="quest-item" data-questline="MainProgression Gideon ErdtreeDLC Varre"><input type="checkbox" class="mr-2"><span>Kill Mohg, Lord of Blood</span></div>
                        <div class="quest-item" data-questline="ErdtreeDLC MainProgression"><input type="checkbox" class="mr-2"><span>Rest at Mohg, Lord of Blood Arena Site of Grace</span></div>
                    </div>
                </div>
                <div class="region-section" data-region-layout="Miquella’s Haligtree">
                    <h3 class="text-xl font-semibold text-gray-700 cursor-pointer" onclick="toggleSectionVisibility(this)">Miquella’s Haligtree</h3>
                    <div class="quest-list pl-4">
                        <div class="quest-item" data-questline="MainProgression Latenna Millicent"><input type="checkbox" class="mr-2"><span>Reach Miquella’s Haligtree (Consecrated Snowfield, Ordina Liturgical Town puzzle)</span></div>
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>Miquella's Haligtree, after Loretta, Knight of the Haligtree boss fight, on the main path.</span></div>
                        <div class="quest-item" data-questline="Millicent Gowry"><input type="checkbox" class="mr-2"><span>Speak to Millicent next to Prayer Room Site of Grace (Miquella's Haligtree)</span></div>
                        <div class="quest-item" data-questline="Millicent Gowry"><input type="checkbox" class="mr-2"><span>Kill Ulcerated Tree Spirit (Miquella’s Haligtree, in the rot lake area before Drainage Channel Site of Grace)</span></div>
                        <div class="quest-item" data-questline="Millicent Gowry"><input type="checkbox" class="mr-2"><span>Assist Millicent (Rotten Winged Sword Insignia) OR assist her sisters (Millicent’s Prosthesis) (Miquella’s Haligtree, after Ulcerated Tree Spirit)</span></div>
                        <div class="quest-item" data-questline="Millicent Gowry"><input type="checkbox" class="mr-2"><span>(If assisted Millicent) reload area and exhaust dialog with Millicent</span></div>
                        <div class="quest-item" data-questline="Millicent Gowry Hyetta"><input type="checkbox" class="mr-2"><span>Take Unalloyed Gold Needle and interact with flower in Malenia’s arena (Miquella’s Haligtree, after defeating Malenia)</span></div>
                        <div class="quest-item" data-questline="MainProgression Gideon Millicent"><input type="checkbox" class="mr-2"><span>Kill Malenia, Blade of Miquella</span></div>
                    </div>
                </div>
                <div class="region-section" data-region-layout="Crumbling Farum Azula">
                    <h3 class="text-xl font-semibold text-gray-700 cursor-pointer" onclick="toggleSectionVisibility(this)">Crumbling Farum Azula</h3>
                    <div class="quest-list pl-4">
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>Crumbling Farum Azula, near the Crumbling Beast Grave Depths Site of Grace.</span></div>
                        <div class="quest-item" data-questline="Bernahl VolcanoManor"><input type="checkbox" class="mr-2"><span>Find and defeat Recusant Bernahl (Crumbling Farum Azula, near Beside the Great Bridge Site of Grace, as an invader)</span></div>
                        <div class="quest-item" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span>Defeat Dragonlord Placidusax (optional remembrance boss, access by lying down in a specific spot after a drop puzzle)</span></div>
                        <div class="quest-item" data-questline="MainProgression Gurranq Corhyn Goldmask"><input type="checkbox" class="mr-2"><span>Defeat Maliketh, the Black Blade</span></div>
                        <div class="quest-item" data-questline="Alexander Jarburg"><input type="checkbox" class="mr-2"><span>Find Alexander and defeat him (Crumbling Farum Azula, in a lava area accessible after Dragon Temple)</span></div>
                    </div>
                </div>
                <div class="region-section" data-region-layout="Leyndell, Ash">
                    <h3 class="text-xl font-semibold text-gray-700 cursor-pointer" onclick="toggleSectionVisibility(this)">Leyndell, Ashen Capital</h3>
                    <div class="quest-list pl-4">
                        <div class="quest-item useful-item-entry" data-item-type="useful" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span><span class="useful-item-label">[Useful Item - Golden Seed]</span>Leyndell, Ashen Capital, found on a large root near the main path after Maliketh.</span></div>
                        <div class="quest-item" data-questline="Corhyn Goldmask"><input type="checkbox" class="mr-2"><span>Find Corhyn at tip of spear (Leyndell, Ashen Capital, near Colosseum)</span></div>
                        <div class="quest-item" data-questline="Corhyn Goldmask"><input type="checkbox" class="mr-2"><span>Find Goldmask through path under elevator (Leyndell, Ashen Capital, near Erdtree Sanctuary)</span></div>
                        <div class="quest-item" data-questline="Corhyn Goldmask"><input type="checkbox" class="mr-2"><span>Reload are and go back to Corhyn and Goldmask to pick up respective sets</span></div>
                    </div>
                </div>
                <div class="region-section" data-region-layout="Endgame">
                    <h3 class="text-xl font-semibold text-gray-700 cursor-pointer" onclick="toggleSectionVisibility(this)">Endgame</h3>
                    <div class="quest-list pl-4">
                        <div class="quest-item" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span>Defeat Radagon of the Golden Order</span></div>
                        <div class="quest-item" data-questline="MainProgression"><input type="checkbox" class="mr-2"><span>Defeat Elden Beast</span></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-lg shadow-md p-6">
            <h2 class="text-2xl font-semibold mb-4 text-gray-700">Shadow of the Erdtree Side Quests</h2>
            <p class="text-gray-600 mb-4">The DLC is a separate story from the main game. Completing all DLC side quests right after Mohg’s boss fight is possible, but you can go back and forth between the main game and DLC if needed.</p>
            <div class="space-y-4">
                <div class="region-section" data-region-layout="Shadow of the Erdtree">
                    <h3 class="text-xl font-semibold text-gray-700 cursor-pointer" onclick="toggleSectionVisibility(this)">Shadow of the Erdtree</h3>
                    <div class="quest-list pl-4">
                        <div class="quest-item" data-questline="ErdtreeDLC Leda"><input type="checkbox" class="mr-2"><span>Speak with Leda and exhaust her dialogue</span></div>
                        <div class="quest-item" data-questline="ErdtreeDLC MainProgression"><input type="checkbox" class="mr-2"><span>Touch the ~withered arm~ and reach Realm of Shadow</span></div>
                        <div class="quest-item" data-questline="ErdtreeDLC Moore"><input type="checkbox" class="mr-2"><span>East of Scorched Ruins there’s a pothead with a Scadutree Fragment</span></div>
                        <div class="quest-item" data-questline="ErdtreeDLC Moore"><input type="checkbox" class="mr-2"><span>There is also a Revered Spirit Ash directly south of the pothead</span></div>
                        <div class="quest-item" data-questline="ErdtreeDLC Hornsent Freyja Ansbach"><input type="checkbox" class="mr-2"><span>Reach Three-Path Cross Site of Grace and speak to Hornsent and Freyja until both of their dialogues are exhausted</span></div>
                        <div class="quest-item" data-questline="ErdtreeDLC Hornsent Freyja Ansbach"><input type="checkbox" class="mr-2"><span>Hornsent will give you a cross map</span></div>
                        <div class="quest-item" data-questline="ErdtreeDLC Ansbach"><input type="checkbox" class="mr-2"><span>Make sure to interact with every Miquella Cross you see</span></div>
                        <div class="quest-item" data-questline="ErdtreeDLC Moore Ansbach"><input type="checkbox" class="mr-2"><span>Reach Main Gate Cross Site of Grace</span></div>
                        <div class="quest-item" data-questline="ErdtreeDLC Moore Ansbach"><input type="checkbox" class="mr-2"><span>Speak to Moore and Ansbach until dialogues are exhausted</span></div>
                        <div class="quest-item" data-questline="ErdtreeDLC Ansbach"><input type="checkbox" class="mr-2"><span>Speaking to Ansbach about the Miquella Crosses you see is not prevalent to his questline and it’s more for just bits of exposition</span></div>
                        <div class="quest-item" data-questline="ErdtreeDLC Moore"><input type="checkbox" class="mr-2"><span>Near Cliffroad Terminus Site of Grace (right near the night Larval Tear location) there is a friend bug, interact with him to progress Moore’s questline (you’ll need to interact with numerous friend bugs before making any significant progress with Moore)</span></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const questlineDefinitions = {
            "All": "All Quests",
            "MainProgression": "Main Progression",
            "Ranni": "Ranni the Witch",
            "Alexander": "Alexander, Iron Fist",
            "Millicent": "Millicent & Gowry",
            "Fia": "Fia, Deathbed Companion",
            "Sellen": "Sorceress Sellen",
            "Hyetta": "Hyetta of the Frenzied Flame",
            "VolcanoManor": "Volcano Manor",
            "DungEater": "Loathsome Dung Eater",
            "Goldmask": "Goldmask & Corhyn",
            "Nepheli": "Nepheli Loux",
            "Boc": "Boc the Seamster",
            "Diallos": "Diallos Hoslow",
            "Patches": "Patches the Untethered",
            "Yura": "Yura, Hunter of Bloody Fingers",
            "Shabriri": "Shabriri (Yura)",
            "Kenneth": "Kenneth Haight",
            "Roderika": "Roderika, Spirit Tuner",
            "Hewg": "Hewg, Smithing Master",
            "Thops": "Thops, Aspiring Sorcerer",
            "Rya": "Rya/Zorayas",
            "Latenna": "Latenna the Albinauric",
            "Albus": "Albus & Medallion",
            "Gurranq": "Gurranq, Beast Clergyman",
            "Jarburg": "Jarburg Community",
            "IrinaEdgar": "Irina & Edgar of Morne",
            "Gostoc": "Gatekeeper Gostoc",
            "Blaidd": "Blaidd the Half-Wolf",
            "Iji": "War Counselor Iji",
            "Seluvis": "Preceptor Seluvis",
            "Jerren": "Witch-Hunter Jerren",
            "Corhyn": "Brother Corhyn (Goldmask)",
            "Bernahl": "Recusant Bernahl",
            "Boggart": "Blackguard Boggart",
            "Varre": "White Mask Varre",
            "Kale": "Merchant Kalé (Howling)",
            "ErdtreeDLC": "Shadow of the Erdtree",
            "Leda": "Leda (DLC)",
            "Moore": "Moore (DLC)",
            "Ansbach": "Ansbach (DLC)",
            "Hornsent": "Hornsent (DLC)",
            "Freyja": "Freyja (DLC)",
            "Eleonora": "Eleonora (Yura's Quest)",
            "Azur": "Primeval Sorcerer Azur (Sellen)",
            "Lusat": "Primeval Sorcerer Lusat (Sellen)",
            "Melina": "Melina (Main Story Touchpoints)"
        };

        const fextralifeBaseUrl = "https://eldenring.wiki.fextralife.com/";
        const fextralifeEntities = {
            // NPCs
            "Varre": "White+Mask+Varre", "White Mask Varre": "White+Mask+Varre", "Yura": "Yura", "Bloody Finger Hunter Yura": "Yura", "Nerijus": "Bloody+Finger+Nerijus", "Patches": "Patches", "Boc": "Boc+the+Seamster", "Sellen": "Sellen", "Sorceress Sellen": "Sellen", "Roderika": "Roderika", "Alexander": "Iron+Fist+Alexander", "Iron Fist Alexander": "Iron+Fist+Alexander", "D, Hunter of the Dead": "D,+Hunter+of+the+Dead", "D": "D,+Hunter+of+the+Dead", "Kenneth Haight": "Kenneth+Haight", "Gurranq, Beast Clergyman": "Gurranq,+Beast+Clergyman", "Gurranq": "Gurranq,+Beast+Clergyman", "Blaidd": "Blaidd", "Darriwil": "Bloodhound+Knight+Darriwil", "Kale": "Merchant+Kale", "Merchant Kalé": "Merchant+Kale", "Ranni the Witch": "Ranni+the+Witch", "Ranni": "Ranni+the+Witch", "Corhyn": "Corhyn", "Brother Corhyn": "Corhyn", "Diallos": "Diallos", "Sir Gideon Ofnir, the All-Knowing": "Sir+Gideon+Ofnir,+the+All-Knowing", "Sir Gideon Ofnir": "Sir+Gideon+Ofnir,+the+All-Knowing", "Gideon Ofnir": "Sir+Gideon+Ofnir,+the+All-Knowing", "Gideon": "Sir+Gideon+Ofnir,+the+All-Knowing", "Fia": "Fia", "Smithing Master Hewg": "Smithing+Master+Hewg", "Hewg": "Smithing+Master+Hewg", "Enia": "Enia", "Finger Reader Enia": "Enia", "Nepheli Loux": "Nepheli+Loux", "Nepheli": "Nepheli+Loux", "Irina": "Irina", "Edgar": "Edgar", "Leonine Misbegotten": "Leonine+Misbegotten", "Gatekeeper Gostoc": "Gatekeeper+Gostoc", "Gostoc": "Gatekeeper+Gostoc", "Sorcerer Rogier": "Sorcerer+Rogier", "Rogier": "Sorcerer+Rogier", "Hyetta": "Hyetta", "Thops": "Thops", "Rya": "Rya", "Zorayas": "Rya", "Blackguard Boggart": "Blackguard+Boggart", "Boggart": "Blackguard+Boggart", "Omenkiller": "Omenkiller", "Albus": "Albus", "Latenna": "Latenna", "War Counselor Iji": "War+Counselor+Iji", "Iji": "War+Counselor+Iji", "Preceptor Seluvis": "Seluvis", "Seluvis": "Seluvis", "Commander O’Neil": "Commander+O'Neil", "O'Neil": "Commander+O'Neil", "Millicent": "Millicent", "Gowry": "Gowry", "Starscourge Radahn": "Starscourge+Radahn", "Radahn": "Starscourge+Radahn", "Witch-Hunter Jerren": "Witch-Hunter+Jerren", "Jerren": "Witch-Hunter+Jerren", "Primeval Sorcerer Lusat": "Primeval+Sorcerer+Lusat", "Lusat": "Primeval+Sorcerer+Lusat", "Master Lusat": "Primeval+Sorcerer+Lusat", "Jar-Bairn": "Jar-Bairn", "D, Beholder of Death": "D,+Beholder+of+Death", "Primeval Sorcerer Azur": "Primeval+Sorcerer+Azur", "Azur": "Primeval+Sorcerer+Azur", "Eleonora, Violet Bloody Finger": "Eleonora,+Violet+Bloody+Finger", "Eleonora": "Eleonora,+Violet+Bloody+Finger", "Goldmask": "Goldmask", "Festering Fingerprint Vyke": "Festering+Fingerprint+Vyke", "Vyke": "Festering+Fingerprint+Vyke", "Baleful Shadow": "Baleful+Shadow", "Astel, Naturalborn of the Void": "Astel,+Naturalborn+of+the+Void", "Astel": "Astel,+Naturalborn+of+the+Void", "Renna": "Ranni+the+Witch", "Lichdragon Fortissax": "Lichdragon+Fortissax", "Fortissax": "Lichdragon+Fortissax", "Tanith": "Tanith", "Old Knight Istvan": "Old+Knight+Istvan", "Istvan": "Old+Knight+Istvan", "Rileigh the Idle": "Rileigh+the+Idle", "Knight Bernahl": "Knight+Bernahl", "Bernahl": "Knight+Bernahl", "Recusant Bernahl": "Knight+Bernahl", "Great Horned Tragoth": "Great+Horned+Tragoth", "Tragoth": "Great+Horned+Tragoth", "Godskin Noble": "Godskin+Noble", "God-Skin Noble": "Godskin+Noble", "Godskin Apostle": "Godskin+Apostle", "Dung Eater": "Dung+Eater", "Morgott, the Omen King": "Morgott,+the+Omen+King", "Morgott": "Morgott,+the+Omen+King", "Juno Hoslow, Knight of Blood": "Juno+Hoslow,+Knight+of+Blood", "Juno Hoslow": "Juno+Hoslow,+Knight+of+Blood", "Fire Giant": "Fire+Giant", "Melina": "Melina", "Mohg, Lord of Blood": "Mohg,+Lord+of+Blood", "Mohg": "Mohg,+Lord+of+Blood", "Malenia, Blade of Miquella": "Malenia,+Blade+of+Miquella", "Malenia": "Malenia,+Blade+of+Miquella", "Dragonlord Placidusax": "Dragonlord+Placidusax", "Placidusax": "Dragonlord+Placidusax", "Maliketh, the Black Blade": "Maliketh,+the+Black+Blade", "Maliketh": "Maliketh,+the+Black+Blade", "Radagon of the Golden Order": "Radagon+of+the+Golden+Order", "Radagon": "Radagon+of+the+Golden+Order", "Elden Beast": "Elden+Beast", "Shabriri": "Shabriri", "Leda": "Leda", "Ansbach": "Ansbach", "Moore": "Moore", "Hornsent": "Hornsent", "Freyja": "Freyja", "Miquella": "Miquella", "Tibia Mariner": "Tibia+Mariner", "Twin Gargoyle": "Valiant+Gargoyle", "Godrick the Grafted": "Godrick+the+Grafted", "Renalla, Queen of the Full Moon": "Rennala,+Queen+of+the+Full+Moon", "Rykard, Lord of Blasphemy": "Rykard,+Lord+of+Blasphemy", "Rykard": "Rykard,+Lord+of+Blasphemy", "Godfrey, First Elden Lord (Golden Shade)": "Godfrey,+First+Elden+Lord+(Golden+Shade)", "Commander Niall": "Commander+Niall", "Loretta, Knight of the Haligtree": "Loretta,+Knight+of+the+Haligtree", "Full-Grown Fallingstar Beast": "Full-Grown+Fallingstar+Beast", "Lesser Ulcerated Tree Spirit": "Lesser+Ulcerated+Tree+Spirit", "Demi-Human Queen Maggie": "Demi-Human+Queen+Maggie", "Valiant Gargoyle": "Valiant+Gargoyle", "Red Wolf of Radagon": "Red+Wolf+of+Radagon", "Putrid Tree Spirit": "Putrid+Tree+Spirit", "Okina": "Bloody+Finger+Okina",

            // Locations
            "Limgrave": "Limgrave", "Church of Anticipation": "Church+of+Anticipation", "The First Step": "The+First+Step", "Fringefolk Hero's Grave": "Fringefolk+Hero's+Grave", "Stormgate": "Stormgate", "Stormhill": "Stormhill", "Stormhill Shack": "Stormhill+Shack", "Murkwater Cave": "Murkwater+Cave", "Church of Elleh": "Church+of+Elleh", "Agheel Lake North": "Agheel+Lake+North", "Coastal Cave": "Coastal+Cave", "Church of Dragon Communion": "Church+of+Dragon+Communion", "Waypoint Ruins": "Waypoint+Ruins", "Saintsbridge": "Saintsbridge", "Summonwater Village Ruins": "Summonwater+Village", "Summonwater Village": "Summonwater+Village", "Bestial Sanctum": "Bestial+Sanctum", "Mistwood": "Mistwood", "Mistwood Ruins": "Mistwood+Ruins", "Third Church of Marika": "Third+Church+of+Marika", "Forlorn Hound Evergaol": "Forlorn+Hound+Evergaol", "Fort Haight": "Fort+Haight", "Roundtable Hold": "Roundtable+Hold", "Weeping Peninsula": "Weeping+Peninsula", "Bridge of Sacrifice": "Bridge+of+Sacrifice", "Ailing Village": "Ailing+Village", "Callu Baptismal Church": "Callu+Baptismal+Church", "Church of Pilgrimage": "Church+of+Pilgrimage", "Oridys's Rise": "Oridys's+Rise", "Castle Morne": "Castle+Morne", "Castle Morne Rampart": "Castle+Morne+Rampart", "Fourth Church of Marika": "Fourth+Church+of+Marika", "Witchbane Ruins": "Witchbane+Ruins", "Stormveil Castle": "Stormveil+Castle", "Stormveil": "Stormveil+Castle", "Godrick Grace": "Godrick+the+Grafted", "Liftside Chamber": "Liftside+Chamber", "Secluded Cell": "Secluded+Cell", "Liurnia of the Lakes": "Liurnia+of+the+Lakes", "Liurnia": "Liurnia+of+the+Lakes", "Lake-Facing Cliffs": "Lake-Facing+Cliffs", "Church of Irith": "Church+of+Irith", "Laskyar Ruins": "Laskyar+Ruins", "Scenic Isle": "Scenic+Isle", "Academy Gate Town": "Academy+Gate+Town", "Boilprawn Shack": "Boilprawn+Shack", "Village of Albinaurics": "Village+of+the+Albinaurics", "Lakeside Crystal Cave": "Lakeside+Crystal+Cave", "Slumbering Wolf’s Shack": "Slumbering+Wolf's+Shack", "Purified Ruins": "Purified+Ruins", "Rose Church": "Rose+Church", "Revenger’s Shack": "Revenger's+Shack", "Western Liurnia": "Liurnia+of+the+Lakes", "Gate Town Bridge": "Gate+Town+Bridge", "Church of Vows": "Church+of+Vows", "Ravine-Veiled Village": "Ravine-Veiled+Village", "Black Knife Catacombs": "Black+Knife+Catacombs", "Converted Tower": "Converted+Tower", "Chapel of Anticipation": "Chapel+of+Anticipation", "The Four Belfries": "The+Four+Belfries", "Four Belfries": "The+Four+Belfries", "Main Academy Gate": "Main+Academy+Gate", "Raya Lucaria Academy": "Raya+Lucaria+Academy", "Raya Lucaria": "Raya+Lucaria+Academy", "Church of the Cuckoo": "Church+of+the+Cuckoo", "Debate Parlor": "Debate+Parlor", "Schoolhouse Classroom": "Schoolhouse+Classroom", "East Raya Lucaria Gate": "East+Raya+Lucaria+Gate", "Bellum Church": "Bellum+Church", "Church of Inhibition": "Church+of+Inhibition", "Caria Manor": "Caria+Manor", "Manor Upper Level": "Manor+Upper+Level", "Testu's Rise": "Testu's+Rise", "Sorcerer's Isle": "Sorcerer's+Isle", "Road to the Manor": "Road+to+the+Manor", "Three Sisters": "Three+Sisters", "Ranni’s Rise": "Ranni's+Rise", "Seluvis’s Rise": "Seluvis's+Rise", "Raya Lucaria Grand Library": "Raya+Lucaria+Grand+Library", "Grand Library": "Raya+Lucaria+Grand+Library", "Carian Study Hall": "Carian+Study+Hall", "Divine Tower of Liurnia": "Divine+Tower+of+Liurnia", "Renna’s Rise": "Renna's+Rise", "Ainsel River Main": "Ainsel+River+Main", "Ainsel River": "Ainsel+River", "Nokstella, Eternal City": "Nokstella,+Eternal+City", "Nokstella": "Nokstella,+Eternal+City", "Grand Cloister": "Grand+Cloister", "Cathedral of Manus Celes": "Cathedral+of+Manus+Celes", "Siofra River": "Siofra+River", "Worshippers' Woods": "Worshippers'+Woods", "Hallowhorn Grounds": "Hallowhorn+Grounds", "Caelid": "Caelid", "Sellia Gateway": "Sellia+Gateway", "Gowry’s Shack": "Gowry's+Shack", "Sellia, Town of Sorcery": "Sellia,+Town+of+Sorcery", "Swamp of Aeonia": "Swamp+of+Aeonia", "Church of the Plague": "Church+of+the+Plague", "Dragonbarrow": "Dragonbarrow", "Lenne's Rise": "Lenne's+Rise", "Redmane Castle": "Redmane+Castle", "Radahn’s arena": "Wailing+Dunes", "Wailing Dunes": "Wailing+Dunes", "War-Dead Catacombs": "War-Dead+Catacombs", "Sellia Hideaway": "Sellia+Hideaway", "Jarburg": "Jarburg", "Nokron, Eternal City": "Nokron,+Eternal+City", "Nokron": "Nokron,+Eternal+City", "Ancestral Woods": "Ancestral+Woods", "Night’s Sacred Ground": "Night's+Sacred+Ground", "Siofra Aqueduct": "Siofra+Aqueduct", "Altus Plateau": "Altus+Plateau", "Grand Lift of Dectus": "Grand+Lift+of+Dectus", "Ruin-Strewn Precipice": "Ruin-Strewn+Precipice", "Altus Highway Junction": "Altus+Highway+Junction", "Erdtree-Gazing Hill": "Erdtree-Gazing+Hill", "Lux Ruins": "Lux+Ruins", "Second Church of Marika": "Second+Church+of+Marika", "Woodfolk Ruins": "Woodfolk+Ruins", "Stormcaller Church": "Stormcaller+Church", "Rampartside Path": "Rampartside+Path", "Writheblood Ruins": "Writheblood+Ruins", "Minor Erdtree": "Minor+Erdtrees", "The Shaded Castle": "The+Shaded+Castle", "Shaded Castle": "The+Shaded+Castle", "Windmill Village": "Windmill+Village", "Dominula, Windmill Village": "Dominula,+Windmill+Village", "Mt Gelmir": "Mt.+Gelmir", "Mt. Gelmir": "Mt.+Gelmir", "Seethewater River": "Seethewater+River", "Seethewater Terminus": "Seethewater+Terminus", "Hermit Village": "Hermit+Village", "Volcano Manor": "Volcano+Manor", "Temple of Eiglay": "Temple+of+Eiglay", "Leyndell, Royal Capital": "Leyndell,+Royal+Capital", "Leyndell": "Leyndell,+Royal+Capital", "Capital Outskirts": "Capital+Outskirts", "Outer Wall Phantom Tree": "Outer+Wall+Phantom+Tree", "East Capital Rampart": "East+Capital+Rampart", "Outer Wall Battleground": "Outer+Wall+Battleground", "Avenue Balcony": "Avenue+Balcony", "West Capital Rampart": "West+Capital+Rampart", "Subterranean Shunning Grounds": "Subterranean+Shunning-Grounds", "Leyndell Catacombs": "Leyndell+Catacombs", "Leyndell Moat": "Leyndell,+Royal+Capital", "Erdtree Sanctuary": "Erdtree+Sanctuary", "Frenzied Flame Proscription": "Frenzied+Flame+Proscription", "Deeproot Depths": "Deeproot+Depths", "Prince of Death’s Throne": "Prince+of+Death's+Throne", "Lake of Rot": "Lake+of+Rot", "Mountaintops of the Giants": "Mountaintops+of+the+Giants", "Shack of the Lofty": "Shack+of+the+Lofty", "Zamor Ruins": "Zamor+Ruins", "Stargazers Ruins": "Stargazer's+Ruins", "Foot of the Forge": "Foot+of+the+Forge", "Freezing Lake": "Freezing+Lake", "First Church of Marika": "First+Church+of+Marika", "Castle Sol": "Castle+Sol", "Church of Repose": "Church+of+Repose", "Giants' Gravepost": "Giants'+Gravepost", "Forge of the Giants": "Forge+of+the+Giants", "Consecrated Snowfield": "Consecrated+Snowfield", "Grand Lift of Rold": "Grand+Lift+of+Rold", "Inner Consecrated Snowfield": "Inner+Consecrated+Snowfield", "Apostate Derelict": "Apostate+Derelict", "Ordina Liturgical Town": "Ordina,+Liturgical+Town", "Mohgwyn Palace": "Mohgwyn+Palace", "Mausoleum Dynasty Midpoint": "Mausoleum+Dynasty+Midpoint", "Miquella’s Haligtree": "Miquella's+Haligtree", "Prayer Room": "Prayer+Room", "Drainage Channel": "Drainage+Channel", "Malenia’s arena": "Elphael,+Brace+of+the+Haligtree", "Crumbling Farum Azula": "Crumbling+Farum+Azula", "Crumbling Beast Grave Depths": "Crumbling+Beast+Grave+Depths", "Beside the Great Bridge": "Beside+the+Great+Bridge", "Dragon Temple": "Dragon+Temple", "Leyndell, Ashen Capital": "Leyndell,+Ashen+Capital", "Colosseum": "Colosseum", "Realm of Shadow": "Realm+of+Shadow", "Scorched Ruins": "Scorched+Ruins", "Cliffroad Terminus": "Cliffroad+Terminus", "Main Gate Cross": "Main+Gate+Cross", "Three-Path Cross": "Three-Path+Cross", "Stonesword Key": "Stonesword+Key", "Teardrop Scarab": "Teardrop+Scarab", "Dectus Medallion": "Dectus+Medallion", "Imbued Sword Key": "Imbued+Sword+Key", "Sewer-Gaol Key": "Sewer-Gaol+Key", "Twin Maiden Husks": "Twin+Maiden+Husks", "Miriel, Pastor of Vows": "Miriel,+Pastor+of+Vows", "Draconic Tree Sentinel": "Draconic+Tree+Sentinel",
            
            // Key Items / Upgrade Materials
            "Sacred Tear": "Sacred+Tear", "Golden Seed": "Golden+Seed", "Talisman Pouch": "Talisman+Pouch", "Memory Stone": "Memory+Stone",
            "Sewing Tools": "Sewing+Needle", "Boc's Sewing Needle": "Sewing+Needle", "Deathroot": "Deathroot", "Chrysalids’ Memento": "Chrysalids'+Memento", "Crimson Hood": "Crimson+Hood", "Shabriri Grape": "Shabriri+Grape", "Rya’s Necklace": "Rya's+Necklace", "Haligtree Secret Medallion (Right)": "Haligtree+Secret+Medallion+(Right)", "Haligtree Secret Medallion (Left)": "Haligtree+Secret+Medallion+(Left)", "Haligtree Secret Medallion": "Haligtree+Secret+Medallion", "Gold Sewing Needle": "Gold+Sewing+Needle", "Black Knifeprint": "Black+Knifeprint", "Academy Glintstone Key": "Academy+Glintstone+Key", "Fingerprint Grape": "Fingerprint+Grape", "Seluvis’s Potion": "Seluvis's+Potion", "Seluvis's Introduction": "Seluvis's+Introduction", "Dolores puppet": "Dolores+the+Sleeping+Arrow+Puppet", "Amber Starlight Shard": "Amber+Starlight", 
            "Magic Scorpion Charm": "Magic+Scorpion+Charm", "Fingerslayer Blade": "Fingerslayer+Blade", "Carian Inverted Statue": "Carian+Inverted+Statue", "Cursemark of Death": "Cursemark+of+Death", "Miniature Ranni": "Miniature+Ranni", "Mini Ranni": "Miniature+Ranni", "Dark Moon Ring": "Dark+Moon+Ring", "Weathered Dagger": "Weathered+Dagger", "Unalloyed Gold Needle": "Unalloyed+Gold+Needle", "Twinned Set": "Twinned+Set", "Lord of Blood’s Favor": "Lord+of+Blood's+Favor", "Festering Bloody Finger": "Festering+Bloody+Finger", "Valkyrie’s Prosthesis": "Valkyrie's+Prosthesis", "Serpent’s Amnion": "Serpent's+Amnion", "Daedicar’s Woe": "Daedicar's+Woe", "Zorayas’ Letter": "Zorayas'+Letter", "Tonic of Forgetfulness": "Tonic+of+Forgetfulness", "Seedbed Curse": "Seedbed+Curse", "Law of Regression": "Law+of+Regression", "Frenzied Flame Seal": "Frenzied+Flame+Seal", "Stormhawk King": "Stormhawk+King", "Ashes of the Stormhawk King": "Stormhawk+King", "Alexander’s Innards": "Alexander's+Innards", "Companion Jar Talisman": "Companion+Jar", "Miquella Cross": "Miquella's+Cross", "Larval Tear": "Larval+Tear", "Scadutree Fragment": "Scadutree+Fragment", "Revered Spirit Ash": "Revered+Spirit+Ash", "Rotten Winged Sword Insignia": "Rotten+Winged+Sword+Insignia", "Millicent’s Prosthesis": "Millicent's+Prosthesis", "Ancient Dragon Smithing Stone": "Ancient+Dragon+Smithing+Stone", "Ulcerated Tree Spirit": "Ulcerated+Tree+Spirit", "Prayerbook": "Prayerbooks", "Keepsake": "Keepsakes"
        };
        const sortedFextralifeEntities = Object.keys(fextralifeEntities).sort((a, b) => b.length - a.length);

        let currentFilter = "All";
        let currentSearchQuery = "";
        let showUsefulItems = true;

        function createFilterButtons() {
            const container = document.getElementById('filterButtonContainer');
            container.innerHTML = ''; 
            Object.keys(questlineDefinitions).forEach(key => {
                const button = document.createElement('button');
                button.textContent = questlineDefinitions[key];
                button.classList.add('filter-button');
                button.dataset.filterKey = key;
                if (key === currentFilter) {
                    button.classList.add('active');
                }
                button.addEventListener('click', () => {
                    currentFilter = key;
                    applyFilters();
                    updateActiveButtonStates();
                });
                container.appendChild(button);
            });
        }

        function updateActiveButtonStates() {
            document.querySelectorAll('.filter-button').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.filterKey === currentFilter);
            });
        }
        
        function replaceBracketsAndApplyLinks() {
            document.querySelectorAll('.quest-item span, .useful-item-entry span').forEach(span => {
                if (span.dataset.processedLinks === "true" && !span.innerHTML.includes("<mark")) return; // Skip if already processed and not highlighted

                let htmlContent = span.dataset.originalHtml || span.innerHTML; // Use original HTML if available for re-processing
                if (!span.dataset.originalHtml) {
                     span.dataset.originalHtml = span.innerHTML; // Store initial HTML
                }


                // Step 1: Replace curly brackets with round brackets (only on initial processing)
                if (!span.dataset.bracketsReplaced) {
                    htmlContent = htmlContent.replace(/{/g, '(').replace(/}/g, ')');
                    span.dataset.bracketsReplaced = "true";
                }
                
                // Step 2: Apply Fextralife links
                const escapeRegex = (string) => string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                sortedFextralifeEntities.forEach(entityKey => {
                    const urlSegment = fextralifeEntities[entityKey];
                    if (!urlSegment) return;
                    const linkUrl = fextralifeBaseUrl + urlSegment;
                    // Regex to match whole word/phrase, case insensitive, avoiding matches inside existing <a> tags or their attributes.
                    const regex = new RegExp(`(?<!<a[^>]*>)(?<![\\w+-])${escapeRegex(entityKey)}(?![^<]*?(?:<\/a>|>))(?![\\w+-])`, 'gi');
                    
                    htmlContent = htmlContent.replace(regex, (match) => {
                         // Check if the match is already part of a link's text content - this is tricky with string replacement.
                         // The regex aims to avoid this, but as a fallback, this check helps.
                        if (match.closest && match.closest('a')) return match; // Experimental, might not work as `match` is a string.
                        return `<a href="${linkUrl}" class="fextralife-link" target="_blank" rel="noopener noreferrer">${match}</a>`;
                    });
                });

                span.innerHTML = htmlContent;
                span.dataset.processedLinks = "true";
                span.dataset.originalText = span.textContent; // Store clean text AFTER bracket replacement and linking for search
                span.dataset.currentLinkedHtml = htmlContent; // Store the HTML with links, before highlighting
            });
        }

        function applyFilters() {
            const query = currentSearchQuery.toLowerCase().trim();
            const showUseful = document.getElementById('showUsefulItemsToggle').checked;

            document.querySelectorAll('.quest-item, .useful-item-entry').forEach(item => {
                const span = item.querySelector('span');
                
                // Ensure originalText is based on the content after bracket replacement and linking
                const questTextForSearch = span.dataset.originalText ? span.dataset.originalText.toLowerCase() : span.textContent.toLowerCase();
                const questlines = item.dataset.questline ? item.dataset.questline.split(' ') : [];
                const isUsefulItem = item.dataset.itemType === 'useful';

                let matchesFilter = (currentFilter === "All" || questlines.includes(currentFilter) || (isUsefulItem && currentFilter === "All"));
                let matchesSearch = (!query || questTextForSearch.includes(query));
                let matchesUsefulToggle = isUsefulItem ? showUseful : true;

                if (matchesFilter && matchesSearch && matchesUsefulToggle) {
                    item.style.display = 'flex';
                    if (query) {
                        // Start with the HTML that has links but no highlights
                        let htmlToHighlight = span.dataset.currentLinkedHtml || span.innerHTML;
                        // Remove previous highlights (if any were manually added or survived somehow)
                        htmlToHighlight = htmlToHighlight.replace(/<mark class="search-highlight">([^<]+)<\/mark>/gi, '$1');
                        
                        try {
                            const escapedQuery = query.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                            // Regex to match the query, ensuring it's not part of an HTML tag attribute or structure
                            const highlightRegex = new RegExp(`(${escapedQuery})(?![^<]*?>|[^<>]*?<\\s*\\/(?:\\s*[^>]*)?>)`, 'gi');
                            span.innerHTML = htmlToHighlight.replace(highlightRegex, `<mark class="search-highlight">$1</mark>`);
                        } catch (e) {
                             // Invalid regex from query, show unhighlighted linked HTML
                            span.innerHTML = htmlToHighlight;
                        }
                    } else {
                         // No query, so ensure we're showing the HTML with links, without highlights
                        span.innerHTML = span.dataset.currentLinkedHtml || span.innerHTML.replace(/<mark class="search-highlight">([^<]+)<\/mark>/gi, '$1');
                    }
                } else {
                    item.style.display = 'none';
                    // Clear highlights if item is hidden, revert to linked HTML
                     span.innerHTML = span.dataset.currentLinkedHtml || span.innerHTML.replace(/<mark class="search-highlight">([^<]+)<\/mark>/gi, '$1');
                }
            });
            updateSectionVisibility();
            updateActiveButtonStates();
        }

        function updateSectionVisibility() {
            document.querySelectorAll('.region-section').forEach(section => {
                const hasVisibleEntry = Array.from(section.querySelectorAll('.quest-item, .useful-item-entry')).some(item => item.style.display === 'flex');
                const h3 = section.querySelector('h3');
                const listDiv = section.querySelector('.quest-list');

                if (h3 && h3.classList.contains('section-collapsed')) {
                    section.style.display = 'block'; 
                    if(listDiv) listDiv.style.display = 'none';
                } else {
                    section.style.display = hasVisibleEntry ? 'block' : 'none';
                    if(listDiv) listDiv.style.display = hasVisibleEntry ? 'block' : 'none';
                }
            });
        }
        
        function toggleSectionVisibility(header) {
            const questList = header.nextElementSibling;
            header.classList.toggle('section-collapsed');
            if (header.classList.contains('section-collapsed')) {
                if(questList) questList.style.display = 'none';
            } else {
                const section = header.parentElement;
                // Re-evaluate visibility based on current filters when expanding
                applyFilters(); // This will call updateSectionVisibility which handles the actual display
            }
        }

        document.getElementById('searchInput').addEventListener('input', function() {
            currentSearchQuery = this.value;
            applyFilters();
        });

        document.getElementById('showUsefulItemsToggle').addEventListener('change', function() {
            showUsefulItems = this.checked;
            localStorage.setItem('eldenRingShowUsefulItems_v1', this.checked);
            applyFilters();
        });

        document.querySelectorAll('input[type="checkbox"]:not(#showUsefulItemsToggle)').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                this.parentElement.classList.toggle('completed', this.checked);
                const span = this.nextElementSibling;
                if (span) span.classList.toggle('completed', this.checked); 
                saveProgress();
            });
        });

       async function saveProgress() {
            const checkboxes = document.querySelectorAll('.quest-item input[type="checkbox"], .useful-item-entry input[type="checkbox"]');
            const progress = Array.from(checkboxes).map((cb, index) => {
                const parentEl = cb.parentElement;
                const span = parentEl.querySelector('span');
                const originalText = span && span.dataset.originalText ? span.dataset.originalText : (span ? span.textContent : `item-${index}`);
                const questTextIdPart = originalText.slice(0, 70).replace(/[^a-zA-Z0-9]/g, '');
                const itemType = parentEl.classList.contains('useful-item-entry') ? 'useful' : 'quest';
                return { id: `${itemType}-${index}-${questTextIdPart}`, checked: cb.checked };
            });
            try {
                 localStorage.setItem('eldenRingQuestGuideProgress_v3_highlightFix', JSON.stringify(progress));
            } catch (error) {
                console.error('Error saving to localStorage:', error);
            }
        }

        async function loadProgress() {
            try {
                const showUsefulItemsSaved = localStorage.getItem('eldenRingShowUsefulItems_v1');
                if (showUsefulItemsSaved !== null) {
                    document.getElementById('showUsefulItemsToggle').checked = JSON.parse(showUsefulItemsSaved);
                    showUsefulItems = JSON.parse(showUsefulItemsSaved);
                } else {
                    document.getElementById('showUsefulItemsToggle').checked = true; 
                    showUsefulItems = true;
                }

                const progressString = localStorage.getItem('eldenRingQuestGuideProgress_v3_highlightFix');
                if (progressString) {
                    const progress = JSON.parse(progressString);
                    const progressMap = new Map(progress.map(item => [item.id, item.checked]));

                    document.querySelectorAll('.quest-item input[type="checkbox"], .useful-item-entry input[type="checkbox"]').forEach((cb, index) => {
                        const parentEl = cb.parentElement;
                        const span = parentEl.querySelector('span');
                        // Ensure originalText is available on the span from replaceBracketsAndApplyLinks
                        const originalText = span && span.dataset.originalText ? span.dataset.originalText : (span ? span.textContent : `item-${index}`);
                        const questTextIdPart = originalText.slice(0, 70).replace(/[^a-zA-Z0-9]/g, '');
                        const itemType = parentEl.classList.contains('useful-item-entry') ? 'useful' : 'quest';
                        const questId = `${itemType}-${index}-${questTextIdPart}`;
                        
                        if (progressMap.has(questId)) {
                            cb.checked = progressMap.get(questId);
                            parentEl.classList.toggle('completed', cb.checked);
                            if(span) span.classList.toggle('completed', cb.checked);
                        }
                    });
                }
            } catch (error) {
                console.error('Error loading from localStorage:', error);
            }
        }
        
        function initializePage() {
            // Store original HTML for all spans before any processing
            document.querySelectorAll('.quest-item span, .useful-item-entry span').forEach(span => {
                span.dataset.originalHtml = span.innerHTML;
            });

            replaceBracketsAndApplyLinks(); 
            createFilterButtons();
            loadProgress(); 
            currentFilter = "All"; 
            applyFilters(); 
            updateActiveButtonStates(); 
        }

        window.addEventListener('load', initializePage);
    </script>
</body>
</html>